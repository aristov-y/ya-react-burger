(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{114:function(e,t,n){e.exports={"modal-overlay":"modal-overlay_modal-overlay__2oYyj"}},115:function(e,t,n){e.exports={Ingredients:"feed-list-ingredients_Ingredients__3ZyE5"}},116:function(e,t,n){e.exports={Main:"reset-password-page_Main__30cIX"}},126:function(e,t,n){},127:function(e,t,n){e.exports={App:"app_App__s9fIc"}},204:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(33),i=n.n(a),s=n(13),o=(n(126),n(127),n(2)),d=n(42),u=n.n(d),l=n(4),j=n(0);var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"primary":"secondary";switch(e){case"BURGER":return Object(j.jsx)(o.BurgerIcon,{type:n});case"LIST":return Object(j.jsx)(o.ListIcon,{type:n});case"PROFILE":return Object(j.jsx)(o.ProfileIcon,{type:n});default:return null}},p=n(82),b=n.n(p),f=n(5),O=function(e){var t=e.text,n=e.type,c=e.to,a=Object(r.useState)(Object(j.jsx)(j.Fragment,{})),i=Object(l.a)(a,2),s=i[0],d=i[1];return Object(r.useEffect)((function(){d(m(n))}),[n]),Object(j.jsx)(f.c,{to:c,exact:!0,className:"",activeClassName:b.a.ActiveLink,children:Object(j.jsxs)(o.Button,{type:"secondary",size:"medium",children:[s,Object(j.jsx)("span",{style:{verticalAlign:"super"},className:"text ml-2 text_type_main-default ".concat(b.a.ButtonText),children:t})]})})};function h(){return Object(j.jsxs)("header",{className:u.a["app-header"],children:[Object(j.jsxs)("nav",{className:u.a["app-header-nav"],children:[Object(j.jsx)(O,{text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",type:"BURGER",to:"/"}),Object(j.jsx)(O,{text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",type:"LIST",to:"/feed"})]}),Object(j.jsx)(f.b,{to:"/",className:u.a["app-header-logo"],children:Object(j.jsx)(o.Logo,{})}),Object(j.jsx)("div",{className:u.a["app-header-profile-wrapper"],children:Object(j.jsx)(O,{text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",type:"PROFILE",to:"/profile"})})]})}var x=c.a.memo(h),g=n(10),_=function(e){var t=e.vertical,n=e.style,c=void 0===n?{}:n,a=e.className,i=e.children,s=Object(r.useMemo)((function(){return Object(g.a)({display:"flex",justifyContent:t?void 0:"center",flexDirection:t?"column":"row",alignItems:t?"center":void 0},c)}),[t,c]);return Object(j.jsx)("div",{style:s,className:a,children:i})},v=n(12),y=n.n(v),I=n(34),N=n.n(I),C=n(85),S=n.n(C),k=n(210),w=function(e){var t=e.item,n=e.onClick,r=e.count,c=void 0===r?0:r,a=e.onImageClick,i=t.price,s=t.name,d=t.image_large,u=Object(k.a)({type:"source",item:{payload:t._id},end:function(e,t){var r=t.getDropResult();r&&"constructor"===r.name&&n&&n()}},[n,t._id]),m=Object(l.a)(u,2)[1];return Object(j.jsxs)("div",{className:y()(S.a["burger-ingredient"],"mt-2"),onClick:n,ref:m,"data-cy":t.type,children:[Object(j.jsx)("img",{className:"ml-4 mr-4",alt:s,src:d,onClick:function(e){e.stopPropagation(),e.preventDefault(),a&&a()}}),Object(j.jsx)("div",{className:"mt-1",children:Object(j.jsxs)("span",{className:y()(S.a["burger-ingredient-price-text"],"text_type_digits-default"),children:[i,Object(j.jsx)(o.CurrencyIcon,{type:"primary"})]})}),Object(j.jsx)("span",{className:"text text_type_main-default mt-1",children:s}),c>0&&Object(j.jsx)(o.Counter,{count:c,size:"default"})]})},P=n(27),E=n(9),L=n(41),F=n(15),T=n.n(F),A=n(28);function M(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function R(e,t,n){(n=n||{}).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var c in n){r+="; "+c;var a=n[c];!0!==a&&(r+="="+a)}document.cookie=r}function D(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}function B(e,t){return fetch("https://norma.nomoreparties.space/api/auth/login",{method:"post",body:JSON.stringify({email:e,password:t}),headers:{"content-type":"application/json"}}).then(D).then((function(e){return e.success?(R("token",e.accessToken),localStorage.setItem("token",e.refreshToken),e):Promise.reject()}))}function U(e,t,n){return fetch("https://norma.nomoreparties.space/api/auth/register",{method:"post",body:JSON.stringify({email:e,password:n,name:t}),headers:{"content-type":"application/json"}}).then(D).then((function(e){return e.success?(R("token",e.accessToken),localStorage.setItem("token",e.refreshToken),e):Promise.reject()}))}function H(){var e=localStorage.getItem("token");return fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({token:e})}).then(D).then((function(e){return e.success&&(R("token","",{"max-age":-1}),localStorage.removeItem("token")),e}))}function J(){return fetch("https://norma.nomoreparties.space/api/auth/user",{method:"get",headers:{Authorization:M("token")}}).then(D).then((function(e){return e.success?e:Promise.reject(e)})).catch((function(e){return"jwt expired"===e.message?function(){var e=localStorage.getItem("token");return fetch("https://norma.nomoreparties.space/api/auth/token",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({token:e})}).then(D).then((function(e){return e.success?(localStorage.setItem("token",e.refreshToken),e):Promise.reject()}))}().then((function(e){return R("token",e.accessToken),localStorage.setItem("token",e.refreshToken),fetch("https://norma.nomoreparties.space/api/auth/user",{method:"get",headers:{Authorization:M("token")}}).then(D)})):Promise.reject(e)}))}function z(e){return fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:M("token")},body:JSON.stringify(e)}).then(D).then((function(e){return e.success?e:Promise.reject()}))}var W=Object(E.b)("auth/login",function(){var e=Object(A.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.abrupt("return",B(n,r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(E.b)("auth/logout",Object(A.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H());case 1:case"end":return e.stop()}}),e)})))),V=Object(E.b)("auth/register",function(){var e=Object(A.a)(T.a.mark((function e(t){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.name,c=t.password,e.abrupt("return",U(n,r,c));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(E.b)("auth/getUser",Object(A.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J());case 1:case"end":return e.stop()}}),e)})))),G=Object(E.b)("auth/updateUser",function(){var e=Object(A.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=Object(E.c)({name:"auth",initialState:{user:{name:"",email:""},error:!1},reducers:{setUser:function(e,t){e.user.email=t.payload.email,e.user.name=t.payload.name}},extraReducers:function(e){e.addCase(W.pending,(function(e){e.error=!1,e.user.email="",e.user.name=""})).addCase(W.fulfilled,(function(e,t){e.user.email=t.payload.user.email,e.user.name=t.payload.user.name})).addCase(W.rejected,(function(e){e.error=!0})).addCase(V.pending,(function(e){e.error=!1,e.user.email="",e.user.name=""})).addCase(V.fulfilled,(function(e,t){e.user.email=t.payload.user.email,e.user.name=t.payload.user.name})).addCase(V.rejected,(function(e){e.error=!0})).addCase(q.pending,(function(e){e.error=!1})).addCase(q.fulfilled,(function(e){e.user.name="",e.user.email=""})).addCase(Y.pending,(function(e){e.user.name="",e.user.email="",e.error=!1})).addCase(Y.fulfilled,(function(e,t){e.user.name=t.payload.user.name,e.user.email=t.payload.user.email})).addCase(Y.rejected,(function(e){e.error=!0})).addCase(G.fulfilled,(function(e,t){e.user.name=t.payload.user.name,e.user.email=t.payload.user.email}))}}),X=(Q.actions.setUser,n(25));var K=function(e,t){var n=Object(X.a)(t);return e.forEach((function(e){var t=e._id,r=n.findIndex((function(e){return e._id===t}));-1===r?n.splice(0,0,e):n.splice(r,1,Object(g.a)({},e))})),n},Z=Object(E.b)("load/feed",(function(){return fetch("".concat("https://norma.nomoreparties.space","/api/orders/all")).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){return e.success?e:Promise.reject()}))})),$=Object(E.c)({name:"feed",initialState:{feed:[],total:0,totalToday:0,loading:!1,hasError:!1},reducers:{setFeed:function(e,t){e.feed=t.payload},updateFeed:function(e,t){var n=t.payload.orders;Array.isArray(n)?e.feed=K(n,e.feed):console.error("Incorrect payload: ",t.payload),e.total=t.payload.total,e.totalToday=t.payload.totalToday}},extraReducers:function(e){e.addCase(Z.pending,(function(e){e.loading=!0,e.hasError=!1})).addCase(Z.fulfilled,(function(e,t){e.feed=Object(X.a)(t.payload.orders),e.total=t.payload.total,e.totalToday=t.payload.totalToday,e.loading=!1})).addCase(Z.rejected,(function(e){e.feed=[],e.loading=!1,e.hasError=!0}))}}),ee=$.actions.updateFeed,te=Object(E.b)("orders/load",(function(){return fetch("".concat("https://norma.nomoreparties.space","/api/orders"),{headers:{Authorization:M("token")}}).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){return e.success?e.orders:Promise.reject()}))})),ne=Object(E.c)({name:"orders",initialState:{orders:[],loading:!1,hasError:!1},reducers:{resetState:function(e){e.orders=[],e.loading=!1,e.hasError=!1},updateOrdersAction:function(e,t){var n=t.payload.orders;Array.isArray(n)?e.orders=K(n,e.orders):console.error("Incorrect payload: ",t.payload)}},extraReducers:function(e){e.addCase(te.pending,(function(e){e.loading=!0,e.hasError=!1})).addCase(te.fulfilled,(function(e,t){e.orders=Object(X.a)(t.payload||[]),e.loading=!1})).addCase(te.rejected,(function(e){e.orders=[],e.loading=!1,e.hasError=!0}))}}),re=ne.actions,ce=(re.resetState,re.updateOrdersAction);var ae,ie=function(){return window.fetch("".concat("https://norma.nomoreparties.space","/api/ingredients")).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){return e.data}))},se={ingredients:[],loading:!1,hasError:!1},oe=Object(E.b)("ingredients/load",Object(A.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie());case 1:case"end":return e.stop()}}),e)})))),de=Object(E.c)({name:"ingredients",initialState:se,reducers:{setIngredients:function(e,t){e.ingredients=t.payload}},extraReducers:function(e){e.addCase(oe.pending,(function(e){e.loading=!0})).addCase(oe.fulfilled,(function(e,t){e.ingredients=t.payload,e.loading=!1,e.hasError=!1})).addCase(oe.rejected,(function(e,t){e.ingredients=[],e.loading=!1,e.hasError=!0}))}}),ue=(de.actions.setIngredients,{main:[],bun:void 0}),le=Object(E.c)({name:"constructor",initialState:ue,reducers:{addIngredient:function(e,t){"bun"===t.payload.type?e.bun=t.payload:e.main.push(t.payload)},removeIngredient:function(e,t){var n=t.payload,r=e.main.findIndex((function(e){return e._id===n}));r>=0&&e.main.splice(r,1)},clearIngredients:function(e){e.main=[],e.bun=void 0},reorderIngredient:function(e,t){var n=Object(l.a)(t.payload,2),r=n[0],c=n[1],a=e.main.findIndex((function(e){return e._id===r}));if(a>=0&&a!==c){var i=e.main.splice(a,1),s=Object(l.a)(i,1)[0];e.main.splice(c,0,s)}}}}),je=n(26),me="WS_CONNECTION_START",pe="WS_CONNECTION_CLOSE",be=["success"];var fe=le.actions,Oe=fe.clearIngredients,he=fe.reorderIngredient,xe=fe.addIngredient,ge=fe.removeIngredient,_e=(ae={},Object(P.a)(ae,de.name,de.reducer),Object(P.a)(ae,le.name,le.reducer),Object(P.a)(ae,Q.name,Q.reducer),Object(P.a)(ae,$.name,$.reducer),Object(P.a)(ae,ne.name,ne.reducer),ae),ve=Object(E.a)({reducer:_e,preloadedState:{constructor:ue,ingredients:se},middleware:function(e){return e().concat([L.a,function(e){var t=null;return function(n){return function(r){var c=e.dispatch,a=r.type,i=r.payload;if(a===me){var s=i.wsUrl,o=i.wsType;(t=new WebSocket(s)).onopen=function(){c({type:"WS_CONNECTION_SUCCESS"})},t.onerror=function(){c({type:"WS_CONNECTION_ERROR",payload:{code:-1,reason:"Unexpected Error"}})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(je.a)(n,be));"orders"===o?c(ce(r)):"feed"===o&&c(ee(r)),c({type:"WS_GET_MESSAGE",payload:r})},t.onclose=function(e){var t=e.code,n=e.reason;c({type:"WS_CONNECTION_CLOSED",payload:{code:t,reason:n}})}}if(t)if("WS_SEND_MESSAGE"===a){var d=M("token"),u=Object(g.a)(Object(g.a)({},i),{},{token:d});t.send(JSON.stringify(u))}else a===pe&&(t.close(1e3,"Closed by peer"),t=null);n(r)}}}])},devTools:!1}),ye=function(){return Object(s.b)()},Ie=ve;function Ne(e){return Object(s.c)(e)}function Ce(){return Object(s.c)((function(e){return e.ingredients.ingredients}))}function Se(){return Object(s.c)((function(e){return e.auth.user}))}function ke(){return Object(s.c)((function(e){return e.orders.orders}))}function we(){return Object(s.c)((function(e){return e.feed.feed}))}function Pe(){return Object(s.c)((function(e){return e.constructor}))}var Ee=function(e){var t=e.title,n=e.items,c=e.itemsClassName,a=e.titleRef,i=e.onShowDetails,s=ye(),o=Pe(),d=o.main,u=o.bun,l=Object(r.useCallback)((function(e){return u&&u._id===e?2:d?d.filter((function(t){return t._id===e})).length:0}),[d,u]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{ref:a,children:Object(j.jsx)("span",{className:"text text_type_main-medium",children:t})}),Object(j.jsx)("div",{className:y()("mt-10 pt-4 pl-4",c),children:n.map((function(e){return Object(j.jsx)(w,{item:e,onClick:function(){return function(e){s(xe(e))}(e)},onImageClick:function(){return i(e)},count:l(e._id)},e._id)}))})]})};var Le=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object(r.useRef)(),i=c.capture,s=c.passive,o=c.once;Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(null!=n&&null!=n.current){var t=n.current;if(!t.addEventListener)return function(){};var r=function(e){return a.current&&a.current(e)},c={capture:i,once:o,passive:s};return t.addEventListener(e,r,c),function(){t&&t.removeEventListener(e,r,c)}}return function(){}}),[e,n,i,s,o])},Fe=n(8),Te=function(e){var t=e.className,n=Object(Fe.h)(),c=Object(Fe.g)(),a=Object(r.useRef)(null),i=ye(),s=Ce(),d=Object(r.useRef)(null),u=Object(r.useRef)(null),m=Object(r.useRef)(null),p=Object(r.useState)("\u0411\u0443\u043b\u043a\u0438"),b=Object(l.a)(p,2),f=b[0],O=b[1],h=Object(r.useCallback)((function(){if(a.current&&d.current&&u.current&&m.current){var e=d.current.offsetTop,t=m.current.offsetTop,n=u.current.offsetTop,r=a.current.scrollTop+.5*a.current.clientHeight;Math.abs(e-r)<Math.abs(n-r)?O("\u0411\u0443\u043b\u043a\u0438"):Math.abs(n-r)<Math.abs(t-r)?O("\u0421\u043e\u0443\u0441\u044b"):O("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")}}),[]);Le("scroll",h,a),Object(r.useEffect)((function(){i(oe())}),[]);var x=function(e){var t;if("\u0411\u0443\u043b\u043a\u0438"===e)null===(t=d.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"});else if("\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===e){var n;null===(n=m.current)||void 0===n||n.scrollIntoView({behavior:"smooth",block:"start"})}else if("\u0421\u043e\u0443\u0441\u044b"===e){var r;null===(r=u.current)||void 0===r||r.scrollIntoView({behavior:"smooth",block:"start"})}O(e)},g=Object(r.useCallback)((function(e){var t=e._id;c.push({pathname:"/ingredient/"+t,state:{background:n}})}),[c,n]);return Object(j.jsxs)("div",{className:y()(t,N.a["burger-ingredients"],"mt-10"),children:[Object(j.jsx)("span",{className:"text text_type_main-medium",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(j.jsxs)("div",{style:{display:"flex"},className:"mt-5",children:[Object(j.jsx)(o.Tab,{active:"\u0411\u0443\u043b\u043a\u0438"===f,value:"\u0411\u0443\u043b\u043a\u0438",onClick:x,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(o.Tab,{active:"\u0421\u043e\u0443\u0441\u044b"===f,value:"\u0421\u043e\u0443\u0441\u044b",onClick:x,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(o.Tab,{active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===f,value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",onClick:x,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(j.jsxs)("div",{className:y()("mt-10",N.a["burger-ingredients-scroller"]),ref:a,children:[Object(j.jsx)(Ee,{titleRef:d,title:"\u0411\u0443\u043b\u043a\u0438",items:s.filter((function(e){return"bun"===e.type})),itemsClassName:N.a["burger-ingredients-container"],onShowDetails:g}),Object(j.jsx)(Ee,{titleRef:u,title:"\u0421\u043e\u0443\u0441\u044b",items:s.filter((function(e){return"sauce"===e.type})),itemsClassName:N.a["burger-ingredients-container"],onShowDetails:g}),Object(j.jsx)(Ee,{titleRef:m,title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",items:s.filter((function(e){return"main"===e.type})),itemsClassName:N.a["burger-ingredients-container"],onShowDetails:g})]})]})},Ae=n(43),Me=n.n(Ae),Re=n(44),De=n.n(Re);var Be=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n=document.querySelector("#".concat(e));return t.current&&n.appendChild(t.current),function(){t.current&&t.current.remove()}}),[e]),t.current||(t.current=document.createElement("div")),t.current};var Ue=function(e){var t=e.id,n=e.children,r=Be(t);return Object(a.createPortal)(n,r)},He=n(114),Je=n.n(He);function ze(e){var t=e.children,n=e.onClick,c=Object(r.useRef)(null);return Object(j.jsx)("div",{ref:c,className:Je.a["modal-overlay"],onClick:function(e){e.stopPropagation(),n&&e.target===c.current&&n()},children:t})}function We(e){var t=e.children,n=e.title,c=e.onClose;return Object(r.useEffect)((function(){function e(e){"Escape"===e.key&&c(),console.log(e.key)}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[c]),Object(j.jsx)(Ue,{id:"modal",children:Object(j.jsx)(ze,{onClick:c,children:Object(j.jsxs)("div",{className:De.a.modal,children:[Object(j.jsxs)("div",{className:"".concat(De.a.modal__header," ml-10 mr-10 mt-10"),children:[Object(j.jsx)("span",{className:"".concat(De.a.modal__title," text text_type_main-medium"),children:n}),Object(j.jsx)(o.CloseIcon,{type:"primary",onClick:c})]}),Object(j.jsx)("div",{className:"".concat(De.a.modal__body," ml-10 mr-10 mb-10"),children:t})]})})})}var qe=n(87),Ve=n.n(qe),Ye=n.p+"static/media/order-done.7e039d55.svg";var Ge=function(e){var t=e.onClose,n=e.orderNum;return Object(r.useEffect)((function(){(new Image).src=Ye}),[]),Object(j.jsx)(We,{onClose:t,children:Object(j.jsxs)("div",{className:"".concat(Ve.a.content," text text_type_main-default"),children:[Object(j.jsx)("span",{className:"text_type_digits-large mt-2 ".concat(Ve.a["order-number"]),children:n}),Object(j.jsx)("span",{className:"mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(j.jsx)("span",{className:"mt-15",children:Object(j.jsx)("img",{alt:"check",src:Ye,width:120,height:120})}),Object(j.jsx)("span",{className:"mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsx)("span",{className:"mt-2 mb-30 text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u0432\u043e\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})};var Qe=function(e){var t={"Content-Type":"application/json"},n=M("token");return n&&(t.Authorization=n),fetch("https://norma.nomoreparties.space/api/orders",{headers:t,method:"POST",body:JSON.stringify({ingredients:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)}))},Xe=n(88),Ke=n.n(Xe),Ze=n(211),$e=function(e){var t=e.item,n=e.index,c=Object(r.useRef)(null),a=ye(),i=Object(Ze.a)({accept:"ingredient",hover:function(e,t){if(c.current){var r=e.index,i=n;if(r!==i){var s=c.current.getBoundingClientRect(),o=(s.bottom-s.top)/2,d=t.getClientOffset().y-s.top;r<i&&d<o||r>i&&d>o||(a(he([e.id,i])),e.index=i)}}}}),s=Object(l.a)(i,2)[1],d=Object(k.a)({item:{id:t._id,index:n},type:"ingredient"},[n,t._id]);return(0,Object(l.a)(d,2)[1])(s(c)),Object(j.jsxs)("div",{ref:c,className:y()(Ke.a["burger-constructor-item"],Ke.a["burger-constructor-item__draggable"]),children:[Object(j.jsx)(o.DragIcon,{type:"primary"}),Object(j.jsx)(o.ConstructorElement,{text:t.name,thumbnail:t.image,price:t.price,handleClose:function(){return a(ge(t._id))}})]})};function et(){console.warn("Order click disabled")}var tt=function(){var e=ye(),t=Object(Fe.g)(),n=Object(Fe.h)(),c=Se().name,a=localStorage.getItem("token"),i=Pe(),s=i.main,d=i.bun,u=Object(r.useState)(!1),m=Object(l.a)(u,2),p=m[0],b=m[1],f=Object(r.useState)(0),O=Object(l.a)(f,2),h=O[0],x=O[1],g=Object(r.useState)(!1),_=Object(l.a)(g,2),v=_[0],I=_[1],N=Object(r.useState)(0),C=Object(l.a)(N,2),S=C[0],k=C[1];Object(r.useEffect)((function(){var e=s.reduce((function(e,t){return e+t.price}),0);k(d?e+2*d.price:e)}),[s,d]);var w=Object(Ze.a)({accept:"ingredient"},[]),P=Object(l.a)(w,2)[1],E=Object(Ze.a)({accept:"source",drop:function(){return{name:"constructor"}}},[]),L=Object(l.a)(E,2)[1];return Object(j.jsxs)("div",{className:"mt-25",style:{flex:"1",maxWidth:"592px"},ref:L,children:[Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[d&&Object(j.jsx)("div",{className:Me.a["burger-constructor-item"],"data-cy":"constructor-bun-top",children:Object(j.jsx)(o.ConstructorElement,{type:"top",isLocked:!0,text:d.name+"(\u0432\u0435\u0440\u0445)",thumbnail:d.image,price:d.price})}),Object(j.jsx)("div",{className:Me.a["burger-constructor-scroller"],ref:P,children:s.map((function(e,t){return Object(j.jsx)($e,{item:e,index:t},"".concat(e._id,"_").concat(t))}))}),d&&Object(j.jsx)("div",{className:Me.a["burger-constructor-item"],"data-cy":"constructor-bun-bottom",children:Object(j.jsx)(o.ConstructorElement,{type:"bottom",isLocked:!0,text:d.name+"(\u043d\u0438\u0437)",thumbnail:d.image,price:d.price})})]}),Object(j.jsxs)("div",{className:y()("mt-10",Me.a["burger-constructor-checkout"]),"data-cy":"checkout-block",children:[Object(j.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[S,Object(j.jsx)(o.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)(o.Button,{type:"primary",size:"medium",onClick:p?et:function(){if(b(!0),s.length||d){if(!c&&!a)return void t.replace({pathname:"/login",state:{from:n}});try{Qe([].concat(Object(X.a)(s.map((function(e){return e._id}))),[d._id,d._id])).then((function(e){x(e.order.number),I(!0),b(!1)})).catch((function(e){console.error(e),b(!1)}))}finally{b(!1)}}else b(!1)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),v&&Object(j.jsx)(Ge,{onClose:function(){I(!1),e(Oe())},orderNum:h})]})},nt=["children"];var rt=function(e){var t=e.children,n=Object(je.a)(e,nt),r=Se().name;return Object(j.jsx)(Fe.b,Object(g.a)(Object(g.a)({},n),{},{render:function(){return r?Object(j.jsx)(Fe.a,{to:"/"}):t}}))},ct=["children"];var at=function(e){var t=e.children,n=Object(je.a)(e,ct),r=Se().name,c=localStorage.getItem("token");return r||c?Object(j.jsx)(Fe.b,Object(g.a)(Object(g.a)({},n),{},{render:function(){return t}})):Object(j.jsx)(Fe.b,Object(g.a)(Object(g.a)({},n),{},{render:function(e){var t=e.location;return Object(j.jsx)(Fe.a,{to:{pathname:"/login",state:{from:t}}})}}))},it=n(59),st=n.n(it),ot=function(e){var t=Object(Fe.g)(),n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1];return"true"===localStorage.getItem("resetPassword")?Object(j.jsx)(Fe.a,{to:"/reset-password"}):Object(j.jsxs)("form",{className:st.a.ForgotPasswordMain,onSubmit:function(e){e.preventDefault(),function(e){return fetch("https://norma.nomoreparties.space/api/password-reset",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({email:e})}).then(D).then((function(e){return e.success?e:Promise.reject(e)}))}(a).then((function(){localStorage.setItem("resetPassword","true"),t.replace({pathname:"/reset-password",state:{email:a}})}))},children:[Object(j.jsx)("div",{className:st.a.Logo,children:Object(j.jsx)(o.Logo,{})}),Object(j.jsx)("div",{className:"text text_type_main-default",children:Object(j.jsx)("h2",{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"})}),Object(j.jsx)("div",{className:st.a.EmailInput,children:Object(j.jsx)(o.Input,{name:"email",value:a,onChange:function(e){return i(e.target.value)},placeholder:"E-mail",type:"email"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(f.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},dt=n(31),ut=n.n(dt);var lt=function(e){var t=e.items,n=Object(Fe.i)().params.id,c=Object(r.useMemo)((function(){return t.find((function(e){return e._id===n}))}),[t,n]);return c?Object(j.jsxs)("div",{className:"".concat(ut.a.content," text_type_main-default"),children:[Object(j.jsx)("img",{className:"ml-4 mr-4",alt:c.name,src:c.image_large}),Object(j.jsx)("span",{className:"text text_type_main-default mt-4 mb-8",children:c.name}),Object(j.jsxs)("div",{className:"".concat(ut.a.description," mb-15 text_color_inactive"),children:[Object(j.jsxs)("div",{className:"".concat(ut.a.description__item," mr-5"),children:[Object(j.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(j.jsx)("span",{className:"text_type_digits-default",children:c.calories})]}),Object(j.jsxs)("div",{className:"".concat(ut.a.description__item," mr-5"),children:[Object(j.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(j.jsx)("span",{className:"text_type_digits-default",children:c.proteins})]}),Object(j.jsxs)("div",{className:"".concat(ut.a.description__item," mr-5"),children:[Object(j.jsx)("span",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(j.jsx)("span",{className:"text_type_digits-default",children:c.fat})]}),Object(j.jsxs)("div",{className:ut.a.description__item,children:[Object(j.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(j.jsx)("span",{className:"text_type_digits-default",children:c.carbohydrates})]})]})]}):null},jt=["children"];var mt=function(e){var t=e.children,n=Object(je.a)(e,jt),r=Se().name,c=localStorage.getItem("resetPassword");return Object(j.jsx)(Fe.b,Object(g.a)(Object(g.a)({},n),{},{render:function(){return r||"true"!==c?Object(j.jsx)(Fe.a,{to:"/"}):t}}))},pt=n(45),bt=n.n(pt),ft=n(60),Ot=n.n(ft);function ht(e){var t=e.id,n=e.overLength,r=void 0===n?0:n,c=e.zIndex,a=void 0===c?0:c,i=Ne((function(e){return e.ingredients.ingredients.find((function(e){return e._id===t}))}));return i?Object(j.jsx)("div",{className:Ot.a.Ingredient,children:Object(j.jsxs)("div",{className:Ot.a.IngredientImage,style:{zIndex:a},children:[Object(j.jsx)("img",{src:i.image,alt:i.name}),r>0&&Object(j.jsxs)("span",{className:"text_type_digits-default ".concat(Ot.a.OverLength),children:["+",r]})]})}):null}var xt=c.a.memo(ht),gt=n(115),_t=n.n(gt);function vt(e){var t=e.ingredients,n=new Set;t.forEach((function(e){return n.add(e)}));var r=Array.from(n),c=r.length,a=c-6;return Object(j.jsx)("div",{className:_t.a.Ingredients,children:r.map((function(e,t){return 5===t?Object(j.jsx)(xt,{id:e,overLength:a,zIndex:c-t},e):t>5?null:Object(j.jsx)(xt,{id:e,zIndex:c-t},e)}))})}function yt(e){var t=e.number,n=e.name,c=e.ingredients,a=e.createdAt,i=e.onClick,s=Ce(),d="".concat(t).padStart(6,"0"),u=Object(r.useMemo)((function(){if(a)return new Date(a).toLocaleString()}),[a]),l=Object(r.useMemo)((function(){return c?s.filter((function(e){return c.includes(e._id)})).reduce((function(e,t){return e+t.price}),0):0}),[s,c]);return Object(j.jsxs)("div",{className:bt.a.FeedListItem,onClick:i,children:[Object(j.jsxs)("div",{className:bt.a.FeedListItemId,children:[Object(j.jsxs)("span",{children:["#",d]}),Object(j.jsx)("span",{className:"text_color_inactive",children:u})]}),Object(j.jsx)("div",{className:"text_type_main-medium",children:n}),Object(j.jsxs)("div",{className:bt.a.FeedListItemIngredients,children:[Object(j.jsx)(vt,{ingredients:c}),Object(j.jsxs)("div",{className:bt.a.FeedListItemPrice,children:[l,Object(j.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})}var It=n(89),Nt=n.n(It);function Ct(e){var t=e.className,n=Object(Fe.h)(),c=Object(Fe.g)(),a=we(),i=Object(r.useCallback)((function(e){c.push({pathname:"/feed/".concat(e),state:{order:!0,background:n}})}),[c,n]);return Object(j.jsx)("div",{className:y()(Nt.a.FeedListScroller,t),children:Object(j.jsx)("div",{className:Nt.a.FeedList,children:a.map((function(e){return Object(j.jsx)(yt,{name:e.name,number:e.number,createdAt:e.createdAt,ingredients:e.ingredients,onClick:function(){return i(e._id)}},e._id)}))})})}var St=n(90),kt=n.n(St),wt=n(46),Pt=n.n(wt),Et=n(61),Lt=n.n(Et);var Ft=function(e){var t=e.title,n=e.orders,r=e.completed,c=void 0!==r&&r;return Object(j.jsxs)("div",{className:Lt.a.Orders,children:[Object(j.jsx)("span",{className:"text text_type_main-medium",children:t}),Object(j.jsx)("div",{className:y()(Lt.a.OrdersList,c&&Lt.a.OrdersCompleted),children:n.map((function(e){return Object(j.jsx)("span",{className:"text text_type_digits-default",children:"".concat(e).padStart(6,"0")},e)}))})]})};var Tt=function(){var e=Object(s.c)((function(e){return e.feed})),t=e.total,n=e.totalToday,r=e.feed,c=r.filter((function(e){return"pending"===e.status})).map((function(e){return e.number})),a=r.filter((function(e){return"done"===e.status})).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.updatedAt).getTime()})).map((function(e){return e.number})).slice(0,5);return Object(j.jsxs)("div",{className:"".concat(Pt.a.FeedStatistic," text"),children:[Object(j.jsxs)("div",{className:Pt.a.FeedStatisticOrders,children:[Object(j.jsx)(Ft,{title:"\u0413\u043e\u0442\u043e\u0432\u044b:",orders:a,completed:!0}),Object(j.jsx)(Ft,{title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",orders:c})]}),Object(j.jsxs)("div",{className:Pt.a.FeedStatisticTotal,children:[Object(j.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(j.jsx)("span",{className:"text text_type_digits-large",children:t})]}),Object(j.jsxs)("div",{className:Pt.a.FeedStatisticTotal,children:[Object(j.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(j.jsx)("span",{className:"text text_type_digits-large",children:n})]})]})},At="".concat("wss://norma.nomoreparties.space","/orders/all");var Mt=function(){var e=ye();return Object(r.useEffect)((function(){return e({type:me,payload:{wsUrl:At,wsType:"feed"}}),function(){e({type:pe})}}),[]),Object(j.jsxs)("div",{className:"text text_type_main-default ".concat(kt.a.FeedListPage),children:[Object(j.jsx)("h3",{children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(j.jsxs)("div",{className:kt.a.FeedListPageContent,children:[Object(j.jsx)(Ct,{}),Object(j.jsx)(Tt,{})]})]})},Rt=n(57),Dt=n.n(Rt),Bt=n(47),Ut=n.n(Bt),Ht=n(48),Jt=n.n(Ht);var zt=function(e){var t=e.ingredients,n=Ce(),c=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e[t]?e[t]=e[t]+1:e[t]=1,e}),{})}),[t]),a=Object(r.useMemo)((function(){var e=Object.keys(c),t=[];return e.forEach((function(e){var r=n.find((function(t){return t._id===e}));r&&t.push({id:r._id,count:c[e],image:r.image,name:r.name,price:r.price})})),t}),[n,c]);return Object(j.jsx)("div",{className:Jt.a.Ingredients,children:a.map((function(e){return Object(j.jsxs)("div",{className:Jt.a.Ingredient,children:[Object(j.jsx)("div",{className:Jt.a.IngredientImage,children:Object(j.jsx)("img",{src:e.image,alt:e.name})}),Object(j.jsx)("div",{className:"text_type_main-default",children:e.name}),Object(j.jsxs)("div",{className:"text text_type_digits-default ".concat(Jt.a.IngredientPrice),children:[e.count," x ",e.price,Object(j.jsx)(o.CurrencyIcon,{type:"primary"})]})]},e.id)}))})};function Wt(e){var t=e.name,n=e.ingredients,c=e.createdAt,a=e.status,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Ce();return Object(r.useMemo)((function(){var n=t.reduce((function(e,t){return e[t._id]=t.price,e}),{});return e.map((function(e){return n[e]||0})).reduce((function(e,t){return e+t}),0)}),[e,t])}(n),s="done"===a?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",d="mb-4 "+("done"===a?Ut.a.Completed:"");return Object(j.jsxs)("div",{className:"".concat(Ut.a.FeedItemDetails," text text_type_main-default"),children:[Object(j.jsx)("span",{className:"mb-4 text_type_main-medium",children:t}),Object(j.jsx)("span",{className:d,children:s}),Object(j.jsx)("div",{className:"".concat(Ut.a.Scroller," mb-4"),children:Object(j.jsx)(zt,{ingredients:n})}),Object(j.jsxs)("div",{className:Ut.a.FeedItemDetailsFooter,children:[Object(j.jsx)("span",{className:"text_color_inactive",children:new Date(c).toLocaleString()}),Object(j.jsxs)("span",{className:"text_type_digits-default",children:[i,Object(j.jsx)(o.CurrencyIcon,{type:"primary"})]})]})]})}var qt=function(){var e=Object(Fe.i)().params.feedId,t=we().find((function(t){return t._id===e}));if(t){var n="".concat(t.number).padStart(6,"0"),r=t.name,c=t.status,a=t.ingredients,i=t.createdAt;return Object(j.jsxs)("div",{className:Dt.a.FeedPage,children:[Object(j.jsxs)("div",{children:["#",n]}),Object(j.jsx)(Wt,{name:r,status:c,createdAt:i,ingredients:a})]})}return null},Vt=n(91),Yt=n.n(Vt),Gt=function(){var e=Object(Fe.h)(),t=ye(),n=Se().name,c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(""),u=Object(l.a)(d,2),m=u[0],p=u[1],b=Object(r.useState)(!1),O=Object(l.a)(b,2),h=O[0],x=O[1];if(n){localStorage.removeItem("resetPassword");var g=(e.state||{from:{pathname:"/"}}).from;return Object(j.jsx)(Fe.a,{to:g})}return Object(j.jsxs)("form",{className:Yt.a.LoginContainer,onSubmit:function(e){e.preventDefault(),t(W({email:i,password:m}))},children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.Logo,{})}),Object(j.jsx)("h2",{className:Yt.a.H2,children:"\u0412\u0445\u043e\u0434"}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{name:"email",value:i,onChange:function(e){return s(e.target.value)},type:"email",placeholder:"E-mail"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{name:"password",value:m,onChange:function(e){return p(e.target.value)},type:h?"text":"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:h?"HideIcon":"ShowIcon",onIconClick:function(){return x((function(e){return!e}))}})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Button,{size:"medium",type:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(j.jsx)(f.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(f.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})};var Qt=function(){var e=Object(Fe.i)().params.orderId,t=ke().find((function(t){return t._id===e}));if(t){var n="".concat(t.number).padStart(6,"0"),r=t.name,c=t.status,a=t.ingredients,i=t.createdAt;return Object(j.jsxs)("div",{className:Dt.a.FeedPage,children:[Object(j.jsxs)("div",{children:["#",n]}),Object(j.jsx)(Wt,{name:r,status:c,createdAt:i,ingredients:a})]})}return null},Xt=n(23),Kt=n.n(Xt);var Zt=function(e){var t=e.children,n=e.mainBlockClassName,c=Object(Fe.g)(),a=ye(),i=Object(r.useCallback)((function(){a(q()).then((function(){c.replace({pathname:"/login"})}))}),[a,c]);return Object(j.jsxs)("div",{className:Kt.a.ProfilePage,children:[Object(j.jsxs)("div",{className:Kt.a.ProfilePage_Menu,children:[Object(j.jsx)(f.c,{exact:!0,to:"/profile",className:"text ".concat(Kt.a.ProfilePage_MenuItem),activeClassName:Kt.a.ProfilePage_MenuItem_Active,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(j.jsx)(f.c,{exact:!0,to:"/profile/orders",className:Kt.a.ProfilePage_MenuItem,activeClassName:Kt.a.ProfilePage_MenuItem_Active,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(j.jsx)("span",{className:Kt.a.ProfilePage_MenuItem,onClick:i,children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(j.jsx)("div",{className:"".concat(Kt.a.ProfilePage_Main," ").concat(n||""),children:t})]})},$t=n(92),en=n.n($t),tn="".concat("wss://norma.nomoreparties.space","/orders");var nn=function(){var e=ye();Object(r.useEffect)((function(){e(te())}),[]);var t=Object(Fe.g)(),n=Object(Fe.h)(),c=ke(),a=M("token");return Object(r.useEffect)((function(){if(a){var t=a.slice(7);return e({type:me,payload:{wsUrl:"".concat(tn,"?token=").concat(t),wsType:"orders"}}),function(){e({type:pe})}}}),[a]),Object(j.jsx)(Zt,{children:Object(j.jsx)("div",{className:en.a.Scroller,children:Object(j.jsx)("div",{className:en.a.OrderList,children:c.map((function(e){return Object(j.jsx)(yt,{number:e.number,name:e.name,createdAt:e.createdAt,ingredients:e.ingredients,onClick:function(){return r=e._id,void t.push({pathname:"/profile/orders/".concat(r),state:{order:!0,background:n}});var r}},e._id)}))})})})},rn=n(62),cn=n.n(rn),an=function(e){var t=Object(Fe.g)(),n=Object(Fe.h)(),c=ye();Object(r.useEffect)((function(){c(Y())}),[]);var a=Ne((function(e){return e.auth})),i=a.user,s=i.name,d=i.email;a.error&&t.replace({pathname:"/login",state:{order:!0,background:n}});var u=Object(r.useState)(""),m=Object(l.a)(u,2),p=m[0],b=m[1],f=Object(r.useState)(""),O=Object(l.a)(f,2),h=O[0],x=O[1],g=Object(r.useState)(""),_=Object(l.a)(g,2),v=_[0],y=_[1],I=Object(r.useState)("EditIcon"),N=Object(l.a)(I,1)[0],C=Object(r.useState)("EditIcon"),S=Object(l.a)(C,1)[0],k=Object(r.useState)("EditIcon"),w=Object(l.a)(k,1)[0];Object(r.useEffect)((function(){return b(s)}),[s]),Object(r.useEffect)((function(){return x(d)}),[d]);var P=Object(r.useCallback)((function(e,t){if(t)switch(e){case"password":break;case"name":b(s);break;case"email":x(d)}}),[d,s]),E=function(){c(G({name:p,email:h}))};return Object(j.jsxs)(Zt,{mainBlockClassName:cn.a.Main,children:[Object(j.jsxs)("form",{className:cn.a.MainForm,onSubmit:function(e){e.preventDefault(),E()},children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{value:p,onChange:function(e){return b(e.target.value)},type:"text",placeholder:"\u0418\u043c\u044f",icon:N,onIconClick:function(){return P("name","CloseIcon"===N)}})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{value:h,onChange:function(e){return x(e.target.value)},type:"text",placeholder:"E-mail",icon:S,onIconClick:function(){return P("email","CloseIcon"===N)}})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{value:v,onChange:function(e){return y(e.target.value)},type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:w,onIconClick:function(){return P("password","CloseIcon"===N)}})})]}),Object(j.jsxs)("div",{className:cn.a.Buttons,children:[Object(j.jsx)(o.Button,{type:"secondary",onClick:function(){b(s),x(d),y("")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(j.jsx)(o.Button,{type:"primary",onClick:E,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},sn=n(93),on=n.n(sn),dn=function(e){var t=Object(Fe.g)(),n=ye(),c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(""),u=Object(l.a)(d,2),m=u[0],p=u[1],b=Object(r.useState)(""),O=Object(l.a)(b,2),h=O[0],x=O[1],g=Object(r.useState)(!1),_=Object(l.a)(g,2),v=_[0],y=_[1];return Object(j.jsxs)("form",{className:on.a.RegisterContainer,onSubmit:function(e){e.preventDefault(),n(V({name:i,email:m,password:h})).then((function(){t.replace("/")}))},children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.Logo,{})}),Object(j.jsx)("h2",{className:on.a.H2,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{name:"name",value:i,onChange:function(e){return s(e.target.value)},type:"text",placeholder:"\u0418\u043c\u044f"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{name:"email",value:m,onChange:function(e){return p(e.target.value)},type:"email",placeholder:"E-mail"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{name:"password",value:h,onChange:function(e){return x(e.target.value)},type:v?"text":"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:v?"HideIcon":"ShowIcon",onIconClick:function(){return y((function(e){return!e}))}})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Button,{type:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b ",Object(j.jsx)(f.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},un=n(116),ln=n.n(un),jn=function(e){var t=Object(Fe.g)(),n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(""),d=Object(l.a)(s,2),u=d[0],m=d[1],p=Object(r.useState)(!1),b=Object(l.a)(p,2),O=b[0],h=b[1],x=Object(r.useCallback)((function(e){e.preventDefault(),function(e,t){return fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({token:e,password:t})}).then(D).then((function(e){return e.success?e:Promise.reject(e)}))}(a,u).then((function(){localStorage.removeItem("resetPassword"),t.replace({pathname:"/login"})}))}),[a,u,t]);return Object(j.jsxs)("form",{className:ln.a.Main,onSubmit:x,children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.Logo,{})}),Object(j.jsx)("div",{children:Object(j.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{value:u,onChange:function(e){return m(e.target.value)},type:O?"text":"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",icon:O?"HideIcon":"ShowIcon",onIconClick:function(){return h((function(e){return!e}))}})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Input,{value:a,onChange:function(e){return i(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",type:"text"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.Button,{type:"primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(f.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})};var mn=function(e){var t=e.onClose,n=Object(Fe.i)().params.id,r=Object(s.c)((function(e){return e.feed.feed.find((function(e){return e._id===n}))}));if(r){var c="".concat(r.number).padStart(6,"0");return Object(j.jsx)(We,{onClose:t,title:"#".concat(c),children:Object(j.jsx)(Wt,{name:r.name,ingredients:r.ingredients,createdAt:r.createdAt,status:r.status})})}return null};var pn=function(e){var t=e.onClose,n=Object(Fe.i)().params.id,r=Ne((function(e){return e.orders.orders.find((function(e){return e._id===n}))}));if(r){var c="".concat(r.number).padStart(6,"0");return Object(j.jsx)(We,{onClose:t,title:"#".concat(c),children:Object(j.jsx)(Wt,{name:r.name,ingredients:r.ingredients,createdAt:r.createdAt,status:r.status})})}return null};var bn=function(){var e=ye(),t=Object(Fe.h)(),n=Object(Fe.g)(),c="PUSH"===n.action&&t.state&&t.state.background,a=Ce();Object(r.useEffect)((function(){e(Y()),e(oe()),e(Z()),e(te())}),[e]);var i=function(){n.replace(c)};return Object(j.jsxs)("div",{className:"App text text_type_main-default",children:[Object(j.jsx)(x,{}),Object(j.jsxs)(Fe.d,{location:c||t,children:[Object(j.jsx)(Fe.b,{exact:!0,path:"/",children:Object(j.jsxs)(_,{style:{gap:"40px"},children:[Object(j.jsx)(Te,{}),Object(j.jsx)(tt,{})]})}),Object(j.jsx)(Fe.b,{exact:!0,path:"/ingredient/:id",children:Object(j.jsx)(lt,{items:a})}),Object(j.jsx)(Fe.b,{exact:!0,path:"/feed",children:Object(j.jsx)(Mt,{})}),Object(j.jsx)(Fe.b,{exact:!0,path:"/feed/:feedId",children:Object(j.jsx)(qt,{})}),Object(j.jsx)(rt,{exact:!0,path:"/login",children:Object(j.jsx)(Gt,{})}),Object(j.jsx)(rt,{exact:!0,path:"/register",children:Object(j.jsx)(dn,{})}),Object(j.jsx)(rt,{exact:!0,path:"/forgot-password",children:Object(j.jsx)(ot,{})}),Object(j.jsx)(mt,{exact:!0,path:"/reset-password",children:Object(j.jsx)(jn,{})}),Object(j.jsx)(at,{exact:!0,path:"/profile",children:Object(j.jsx)(an,{})}),Object(j.jsx)(at,{exact:!0,path:"/profile/orders",children:Object(j.jsx)(nn,{})}),Object(j.jsx)(at,{exact:!0,path:"/profile/orders/:orderId",children:Object(j.jsx)(Qt,{})})]}),c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Fe.b,{exact:!0,path:"/ingredient/:id",render:function(){return Object(j.jsx)(We,{onClose:i,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(j.jsx)(lt,{items:a})})}}),Object(j.jsx)(Fe.b,{exact:!0,path:"/feed/:id",render:function(){return Object(j.jsx)(mn,{onClose:i})}}),Object(j.jsx)(Fe.b,{exact:!0,path:"/profile/orders/:id",render:function(){return Object(j.jsx)(pn,{onClose:i})}})]})]})},fn=n(117),On=n(209),hn=n(81),xn=n.n(hn);n(203);xn.a.locale("ru"),i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(s.a,{store:Ie,children:Object(j.jsx)(On.a,{backend:fn.a,children:Object(j.jsx)(f.a,{children:Object(j.jsx)(bn,{})})})})}),document.getElementById("root"))},23:function(e,t,n){e.exports={ProfilePage:"profile_ProfilePage__XyJqF",ProfilePage_Menu:"profile_ProfilePage_Menu__3LYAs",ProfilePage_MenuItem:"profile_ProfilePage_MenuItem__1Sqbz",ProfilePage_MenuItem_Active:"profile_ProfilePage_MenuItem_Active__1_nGs",ProfilePage_Main:"profile_ProfilePage_Main__2IBKq"}},31:function(e,t,n){e.exports={content:"ingredient-details_content__2KMar",description__item:"ingredient-details_description__item__1-Ych",description:"ingredient-details_description__1eTeM"}},34:function(e,t,n){e.exports={"burger-ingredients":"burger-ingredients_burger-ingredients__1CEhi","burger-ingredients-container":"burger-ingredients_burger-ingredients-container__6gk-H","burger-ingredients-scroller":"burger-ingredients_burger-ingredients-scroller__1adOr"}},42:function(e,t,n){e.exports={"app-header":"app-header_app-header__sdeY1","app-header-nav":"app-header_app-header-nav__2Sd1p","app-header-logo":"app-header_app-header-logo__UaQS9","app-header-profile-wrapper":"app-header_app-header-profile-wrapper__3mLJ6"}},43:function(e,t,n){e.exports={"burger-constructor-scroller":"burger-constructor_burger-constructor-scroller__26ddT","burger-constructor-item":"burger-constructor_burger-constructor-item__14B3C","burger-constructor-item__draggable":"burger-constructor_burger-constructor-item__draggable__3Al43","burger-constructor-checkout":"burger-constructor_burger-constructor-checkout__1rHyq"}},44:function(e,t,n){e.exports={modal:"modal_modal__fHqvl",modal__header:"modal_modal__header__3a7y8","modal__close-button":"modal_modal__close-button__3SN-S",modal__body:"modal_modal__body__2oHWB"}},45:function(e,t,n){e.exports={FeedListItem:"feed-list-item_FeedListItem__18zOW",FeedListItemId:"feed-list-item_FeedListItemId__38IvZ",FeedListItemIngredients:"feed-list-item_FeedListItemIngredients__VhIXv",FeedListItemPrice:"feed-list-item_FeedListItemPrice__2v-fI"}},46:function(e,t,n){e.exports={FeedStatistic:"feed-statistics_FeedStatistic__27L3v",FeedStatisticOrders:"feed-statistics_FeedStatisticOrders__2o4lV",FeedStatisticTotal:"feed-statistics_FeedStatisticTotal__N14cO"}},47:function(e,t,n){e.exports={FeedItemDetails:"feed-item-details_FeedItemDetails__ODfw5",Scroller:"feed-item-details_Scroller__3OlYk",Completed:"feed-item-details_Completed__tZgqA",FeedItemDetailsFooter:"feed-item-details_FeedItemDetailsFooter__3ci4L"}},48:function(e,t,n){e.exports={Ingredients:"feed-item-ingredients_Ingredients__1JUoN",Ingredient:"feed-item-ingredients_Ingredient__18UgA",IngredientImage:"feed-item-ingredients_IngredientImage__11YMU",IngredientPrice:"feed-item-ingredients_IngredientPrice__2QxD8"}},57:function(e,t,n){e.exports={FeedPage:"feed-page_FeedPage__76Ev3"}},59:function(e,t,n){e.exports={ForgotPasswordMain:"forgot-password-page_ForgotPasswordMain__1WjVq",Logo:"forgot-password-page_Logo__3tpAH",EmailInput:"forgot-password-page_EmailInput__FB_Q0"}},60:function(e,t,n){e.exports={Ingredient:"feed-list-ingredient_Ingredient__3Xf21",IngredientImage:"feed-list-ingredient_IngredientImage__2OgF_",OverLength:"feed-list-ingredient_OverLength__dgVIe"}},61:function(e,t,n){e.exports={Orders:"feed-statistic-orders_Orders__AVOYS",OrdersTitle:"feed-statistic-orders_OrdersTitle__1P_u2",OrdersList:"feed-statistic-orders_OrdersList__3K28H",OrdersCompleted:"feed-statistic-orders_OrdersCompleted__dpkaA"}},62:function(e,t,n){e.exports={Main:"profile-page_Main__2qD-h",MainForm:"profile-page_MainForm__3FVVp",Buttons:"profile-page_Buttons__2xHJN"}},82:function(e,t,n){e.exports={ButtonText:"header-button_ButtonText__3QXoI",ActiveLink:"header-button_ActiveLink__5ktdN"}},85:function(e,t,n){e.exports={"burger-ingredient":"burger-ingredient_burger-ingredient__NnQrk","burger-ingredient-price-text":"burger-ingredient_burger-ingredient-price-text__yEpp_"}},87:function(e,t,n){e.exports={content:"order-details_content__TyWGQ","order-number":"order-details_order-number__1_xqu"}},88:function(e,t,n){e.exports={"burger-constructor-item":"burger-constructor-item_burger-constructor-item__2l9Ji","burger-constructor-item__draggable":"burger-constructor-item_burger-constructor-item__draggable__1MX0k"}},89:function(e,t,n){e.exports={FeedList:"feed-list_FeedList__YKjwD",FeedListScroller:"feed-list_FeedListScroller__3qkVa"}},90:function(e,t,n){e.exports={FeedListPage:"feed-list-page_FeedListPage__3A7yy",FeedListPageContent:"feed-list-page_FeedListPageContent__-00Ek"}},91:function(e,t,n){e.exports={LoginContainer:"login-page_LoginContainer__2TmTg",H2:"login-page_H2__2w1Ab"}},92:function(e,t,n){e.exports={Scroller:"orders-page_Scroller__eARca",OrderList:"orders-page_OrderList__C2aR0"}},93:function(e,t,n){e.exports={RegisterContainer:"register-page_RegisterContainer__3bUcc",H2:"register-page_H2__ReEB7"}}},[[204,1,2]]]);
//# sourceMappingURL=main.021533b7.chunk.js.map