{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/feed-list-ingredients/feed-list-ingredients.module.css","pages/reset-password-page/reset-password-page.module.css","components/app/app.module.css","components/header-button/getIcon.tsx","components/header-button/index.ts","components/header-button/header-button.tsx","components/app-header/app-header.tsx","components/app-header/index.ts","components/main-container/index.ts","components/main-container/main-container.tsx","components/burger-ingredient/index.ts","components/burger-ingredient/burger-ingredient.tsx","utils/cookies.ts","utils/auth.ts","services/auth.ts","utils/mergeOrders.ts","services/feed.ts","utils/orders.ts","services/orders.ts","utils/ingredients.ts","services/ingredients.ts","services/constructor.ts","services/action-types.ts","services/store.ts","services/middleware/socketMiddleware.ts","services/selectors.ts","components/burger-ingredients/burger-ingredients-section.tsx","hooks/use-event-listener.ts","components/burger-ingredients/index.ts","components/burger-ingredients/burger-ingredients.tsx","hooks/use-portal.ts","components/portal/portal.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/order-done.svg","components/order-details/order-details.tsx","utils/get-order.ts","components/burger-constructor-element/burger-constructor-item.tsx","components/burger-contructor/burger-constructor.tsx","components/burger-contructor/index.ts","components/protected-unauthorized-route/index.tsx","components/protected-route/index.tsx","pages/forgot-password-page/index.tsx","components/ingredient-details/ingredient-details.tsx","components/protected-unauthorized-route-with-reset/index.tsx","components/feed-list-ingredients/feed-list-ingredient.tsx","components/feed-list-ingredients/index.tsx","components/feed-list-item/index.tsx","components/feed-list/index.tsx","components/feed-statistic-orders/index.tsx","components/feed-statistics/index.tsx","pages/feed-list-page/index.tsx","components/feed-item-ingredients/index.tsx","components/feed-item-details/index.tsx","pages/feed-page/index.tsx","pages/login-page/index.tsx","pages/order-page/index.tsx","components/profile/index.tsx","pages/orders-page/index.tsx","pages/profile-page/index.tsx","pages/register-page/index.tsx","pages/reset-password-page/index.tsx","components/feed-item-modal/index.tsx","components/order-modal/index.tsx","components/app/app.tsx","index.tsx","components/profile/profile.module.css","components/ingredient-details/ingredient-details.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app-header/app-header.module.css","components/burger-contructor/burger-constructor.module.css","components/modal/modal.module.css","components/feed-list-item/feed-list-item.module.css","components/feed-statistics/feed-statistics.module.css","components/feed-item-details/feed-item-details.module.css","components/feed-item-ingredients/feed-item-ingredients.module.css","pages/feed-page/feed-page.module.css","pages/forgot-password-page/forgot-password-page.module.css","components/feed-list-ingredients/feed-list-ingredient.module.css","components/feed-statistic-orders/feed-statistic-orders.module.css","pages/profile-page/profile-page.module.css","components/header-button/header-button.module.css","components/burger-ingredient/burger-ingredient.module.css","components/order-details/order-details.module.css","components/burger-constructor-element/burger-constructor-item.module.css","components/feed-list/feed-list.module.css","pages/feed-list-page/feed-list-page.module.css","pages/login-page/login-page.module.css","pages/orders-page/orders-page.module.css","pages/register-page/register-page.module.css"],"names":["module","exports","getIcon","iconType","active","type","HeaderButton","text","to","useState","icon","setIcon","useEffect","exact","className","activeClassName","styles","ActiveLink","size","style","verticalAlign","ButtonText","AppHeader","React","memo","MainContainer","vertical","children","currentStyles","useMemo","display","justifyContent","undefined","flexDirection","alignItems","BurgerIngredient","item","onClick","count","onImageClick","price","name","img","image_large","useDrag","payload","_id","end","draggedItem","monitor","dropResult","getDropResult","drag","classnames","ref","alt","src","evt","stopPropagation","preventDefault","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","setCookie","value","options","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","responseParse","response","ok","json","then","err","Promise","reject","loginRequest","email","password","fetch","method","body","JSON","stringify","headers","data","success","accessToken","localStorage","setItem","refreshToken","registerRequest","logoutRequest","token","getItem","removeItem","userInfoRequest","catch","message","tokenRequest","updateUserInfo","user","loginAction","createAsyncThunk","a","logoutAction","registerAction","getUserAction","updateUserAction","auth","createSlice","initialState","error","reducers","setUser","state","action","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","mergeOrders","newOrders","oldItems","temp","forEach","val","id","idx","findIndex","e","splice","loadFeed","process","statusText","feed","total","totalToday","loading","hasError","setFeed","updateFeed","orders","Array","isArray","console","updateFeedAction","loadOrders","resetState","updateOrdersAction","fetchIngredients","window","jsonData","ingredientsState","ingredients","loadIngredients","setIngredients","constructorState","main","bun","constructor","addIngredient","push","removeIngredient","ingredientId","index","clearIngredients","reorderIngredient","oldIndex","deleted","WS_CONNECTION_START","WS_CONNECTION_CLOSE","reducer","store","configureStore","preloadedState","middleware","getDefaultMiddleware","concat","thunk","socket","next","dispatch","wsUrl","wsType","WebSocket","onopen","onerror","code","reason","onmessage","event","parsedData","parse","restParsedData","onclose","send","close","devTools","useStoreDispatch","useDispatch","useStoreSelector","selector","useSelector","useIngredientsSelector","useUserSelector","useOrdersSelector","useFeedSelector","useConstructorSelector","BurgerIngredientsSection","title","items","itemsClassName","titleRef","onShowDetails","getCount","useCallback","filter","length","map","onIngredientClick","useEventListener","eventName","handler","elementRef","savedHandler","useRef","capture","passive","once","current","addEventListener","eventListener","opts","removeEventListener","BurgerIngredients","location","useLocation","history","useHistory","scrollerRef","bunRef","sauceRef","mainRef","tabValue","setTabValue","onScroll","bunTop","offsetTop","mainTop","sauceTop","scroll","scrollTop","clientHeight","Math","abs","onTabClick","scrollIntoView","behavior","block","pathname","background","usePortal","rootElemRef","parentElem","querySelector","appendChild","remove","createElement","Portal","target","createPortal","ModalOverlay","Modal","onClose","onKeyPress","key","log","OrderDetails","orderNum","Image","orderDoneImage","width","height","getOrder","ingredientIds","BurgerConstructorItem","useDrop","accept","hover","obj","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","dropRef","dragRef","thumbnail","image","handleClose","disabledOrderClick","warn","BurgerConstructor","coDisable","setCODisable","setOrderNum","showOrder","setShowOrder","setPrice","newTotal","reduce","prev","curr","drop","dropSource","flex","maxWidth","gap","isLocked","from","order","number","ProtectedUnauthorizedRoute","rest","render","ProtectedRoute","ForgotPasswordPage","props","setEmail","ForgotPasswordMain","onSubmit","ev","resetPasswordRequest","Logo","EmailInput","onChange","placeholder","IngredientDetails","itemId","useRouteMatch","params","find","calories","proteins","fat","carbohydrates","ProtectedUnauthorizedRouteWithReset","withReset","FeedListIngredient","overLength","zIndex","ingredient","Ingredient","IngredientImage","OverLength","FeedListIngredients","unique","Set","add","uniqueIngredients","Ingredients","FeedListItem","createdAt","ingredientInfos","idText","padStart","date","toLocaleString","includes","previousValue","currentValue","FeedListItemId","FeedListItemIngredients","FeedListItemPrice","FeedList","classNames","FeedListScroller","FeedStatisticOrders","completed","Orders","OrdersList","OrdersCompleted","FeedStatistics","inProgress","status","sort","b","getTime","updatedAt","slice","FeedStatistic","FeedStatisticTotal","FeedListPage","FeedListPageContent","FeedItemIngredients","mainIngredients","filteredIngredients","keys","Object","result","IngredientPrice","FeedItemDetails","totalPrice","prices","useIngredientsTotalPrice","statusClass","Completed","Scroller","FeedItemDetailsFooter","FeedPage","feedId","feedNum","LoginPage","setPassword","showPass","setShowPass","LoginContainer","H2","onIconClick","OrderPage","orderId","Profile","mainBlockClassName","onLogoutClick","ProfilePage","ProfilePage_Menu","ProfilePage_MenuItem","ProfilePage_MenuItem_Active","ProfilePage_Main","OrdersPage","parsedToken","OrderList","userName","userEmail","setName","nameIcon","emailIcon","passIcon","onClear","canClose","onSave","Main","MainForm","Buttons","RegisterPage","RegisterContainer","ResetPasswordPage","setToken","onHandleSubmit","resetPassword","FeedItemModal","feedItem","OrderModal","orderItem","App","onModalClose","path","moment","locale","ReactDOM","StrictMode","DndProvider","backend","HTML5Backend","basename","getElementById"],"mappings":"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","file":"static/js/main.056c5c5b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal-overlay\":\"modal-overlay_modal-overlay__2oYyj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Ingredients\":\"feed-list-ingredients_Ingredients__3ZyE5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"reset-password-page_Main__30cIX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"app_App__s9fIc\"};","import {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport React from 'react';\r\n\r\nfunction getIcon(iconType: 'BURGER' | 'LIST' | 'PROFILE', active: boolean = false) {\r\n  const type = active ? 'primary' : 'secondary';\r\n  switch (iconType) {\r\n    case 'BURGER':\r\n      return (<BurgerIcon type={type} />);\r\n    case 'LIST':\r\n      return (<ListIcon type={type} />);\r\n    case 'PROFILE':\r\n      return (<ProfileIcon type={type} />);\r\n    default:\r\n      return null as never;\r\n  }\r\n}\r\n\r\nexport default getIcon;\r\n","import HeaderButton from './header-button';\r\n\r\nexport default HeaderButton;\r\n","import React, { FunctionComponent, useEffect, useState } from 'react';\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport getIcon from './getIcon';\r\nimport styles from './header-button.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\ntype IconTypes = 'BURGER' | 'LIST' | 'PROFILE';\r\n\r\ninterface OwnProps {\r\n  text: string;\r\n  type: IconTypes\r\n  onClick?: () => void;\r\n  to: string;\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst HeaderButton: FunctionComponent<Props> = ({ text, type, to }) => {\r\n  const [icon, setIcon] = useState<JSX.Element>(<></>);\r\n  useEffect(() => {\r\n    setIcon(getIcon(type));\r\n  }, [type])\r\n  return (\r\n    <NavLink\r\n      to={to}\r\n      exact\r\n      className=\"\"\r\n      activeClassName={styles.ActiveLink}\r\n    >\r\n      <Button\r\n        type=\"secondary\"\r\n        size=\"medium\"\r\n      >\r\n        {icon}\r\n        <span\r\n          style={{verticalAlign: 'super'}}\r\n          className={`text ml-2 text_type_main-default ${styles.ButtonText}`}\r\n        >\r\n          {text}\r\n        </span>\r\n      </Button>\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default HeaderButton;\r\n","import React from 'react'\r\nimport { Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './app-header.module.css';\r\nimport HeaderButton from '../header-button';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction AppHeader() {\r\n  return (\r\n    <header className={styles['app-header']}>\r\n      <nav className={styles['app-header-nav']}>\r\n        <HeaderButton text=\"Конструктор\" type=\"BURGER\" to=\"/\" />\r\n        <HeaderButton text=\"Лента заказов\" type=\"LIST\" to=\"/feed\" />\r\n      </nav>\r\n      <Link to=\"/\" className={styles['app-header-logo']}>\r\n        <Logo />\r\n      </Link>\r\n      <div className={styles['app-header-profile-wrapper']}>\r\n        <HeaderButton text=\"Личный кабинет\" type=\"PROFILE\" to=\"/profile\"/>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default React.memo(AppHeader);\r\n","import AppHeader from './app-header';\r\n\r\nexport default AppHeader;","import MainContainer from './main-container';\r\n\r\nexport default MainContainer;\r\n","import React, { CSSProperties, FunctionComponent, useMemo } from 'react';\r\n\r\ninterface OwnProps {\r\n  vertical?: boolean;\r\n  style?: CSSProperties;\r\n  className?: string;\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst MainContainer: FunctionComponent<Props> = (\r\n  {\r\n    vertical,\r\n    style = {},\r\n    className,\r\n    children\r\n  }\r\n) => {\r\n  const currentStyles = useMemo<CSSProperties>(() => {\r\n    return {\r\n      display: 'flex',\r\n      justifyContent: vertical ? undefined : 'center',\r\n      flexDirection: vertical ? 'column' : 'row',\r\n      alignItems: vertical ? 'center' : undefined,\r\n      ...style\r\n    }\r\n  }, [vertical, style]);\r\n  return (\r\n    <div style={currentStyles} className={className}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainContainer;\r\n","import BurgerIngredient from './burger-ingredient'\r\n\r\nexport default BurgerIngredient;\r\n","import React, { FunctionComponent } from 'react';\r\nimport styles from './burger-ingredient.module.css'\r\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport classnames from 'classnames';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport { useDrag } from 'react-dnd';\r\n\r\ninterface OwnProps {\r\n  item: Ingredient\r\n  count?: number;\r\n  onClick?: () => void;\r\n  onImageClick?: () => void;\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\ntype TDragItem = {\r\n  payload: string\r\n}\r\n\r\ntype TDropObject = {\r\n  dropEffect: string;\r\n  name: string;\r\n}\r\n\r\nconst BurgerIngredient: FunctionComponent<Props> = ({ item, onClick, count = 0, onImageClick }) => {\r\n  const { price, name, image_large: img } = item;\r\n  const onImageClickInternal: React.MouseEventHandler = (evt) => {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    onImageClick && onImageClick();\r\n  }\r\n  const [,drag] = useDrag<TDragItem, TDropObject, never>({\r\n    type: 'source',\r\n    item: {\r\n      payload: item._id\r\n    },\r\n    end: (draggedItem, monitor) => {\r\n      const dropResult = monitor.getDropResult();\r\n\r\n      if (dropResult && dropResult.name === 'constructor') {\r\n        onClick && onClick();\r\n      }\r\n    }\r\n  }, [onClick, item._id])\r\n  return (\r\n    <div\r\n      className={ classnames(styles['burger-ingredient'], 'mt-2') }\r\n      onClick={ onClick }\r\n      ref={drag}\r\n      data-cy={item.type}\r\n    >\r\n      <img className={ 'ml-4 mr-4' } alt={ name } src={ img } onClick={onImageClickInternal}/>\r\n      <div className=\"mt-1\">\r\n        <span\r\n          className={\r\n            classnames(\r\n              styles['burger-ingredient-price-text'],\r\n              'text_type_digits-default')\r\n          }\r\n        >\r\n          { price }\r\n          <CurrencyIcon type={ 'primary' }/>\r\n        </span>\r\n      </div>\r\n      <span className={ 'text text_type_main-default mt-1' }>{ name }</span>\r\n      { (count > 0) && <Counter count={ count } size=\"default\"/> }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredient;\r\n","function getCookie(name: string) {\r\n  let matches = document.cookie.match(new RegExp(\r\n    \"(?:^|; )\" + name.replace(/([.$?*|{}()[\\]\\\\/^])/g, '\\\\$1') + \"=([^;]*)\"\r\n  ));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\ntype CookieOptions = { [name: string]: string | number | boolean | Date }\r\n\r\nfunction setCookie(\r\n  name: string,\r\n  value: string,\r\n  options?: CookieOptions\r\n) {\r\n  options = options || {};\r\n\r\n  if (options.expires instanceof Date) {\r\n    options.expires = options.expires.toUTCString();\r\n  }\r\n\r\n  let updatedCookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\r\n\r\n  for (let optionKey in options) {\r\n    updatedCookie += \"; \" + optionKey;\r\n    let optionValue = options[optionKey];\r\n    if (optionValue !== true) {\r\n      updatedCookie += \"=\" + optionValue;\r\n    }\r\n  }\r\n\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nfunction deleteCookie(name: string) {\r\n  setCookie(name, \"\", {\r\n    'max-age': -1\r\n  })\r\n}\r\n\r\nexport {\r\n  setCookie,\r\n  getCookie,\r\n  deleteCookie\r\n}\r\n","import { deleteCookie, getCookie, setCookie } from './cookies';\r\nimport { TSimpleUserInfo } from '../types';\r\n\r\ninterface RegisterResponse {\r\n  success: boolean,\r\n  accessToken: string,\r\n  \"refreshToken\": string,\r\n  user: {\r\n    email: string,\r\n    name: string\r\n  }\r\n}\r\n\r\ninterface RefreshResponse {\r\n  success: boolean,\r\n  accessToken: string,\r\n  refreshToken: string\r\n}\r\n\r\ninterface UserResponse {\r\n  success: boolean,\r\n  user: {\r\n    email: string,\r\n    name: string\r\n  }\r\n}\r\n\r\ninterface SimpleResponse {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nfunction responseParse(response: Response) {\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n  return response.json().then(err => Promise.reject(err));\r\n}\r\n\r\nfunction loginRequest(email: string, password: string): Promise<RegisterResponse> {\r\n  return fetch('https://norma.nomoreparties.space/api/auth/login', {\r\n    method: 'post',\r\n    body: JSON.stringify({\r\n      email,\r\n      password\r\n    }),\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    }\r\n  })\r\n    .then(responseParse)\r\n    .then((data: RegisterResponse) => {\r\n      if (data.success) {\r\n        setCookie('token', data.accessToken);\r\n        localStorage.setItem('token', data.refreshToken)\r\n        return data;\r\n      }\r\n      return Promise.reject();\r\n    });\r\n}\r\n\r\nfunction registerRequest(email: string, name: string, password: string): Promise<RegisterResponse> {\r\n  return fetch('https://norma.nomoreparties.space/api/auth/register', {\r\n    method: 'post',\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n      name\r\n    }),\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    }\r\n  })\r\n    .then(responseParse)\r\n    .then((data: RegisterResponse) => {\r\n      if (data.success) {\r\n        setCookie('token', data.accessToken);\r\n        localStorage.setItem('token', data.refreshToken)\r\n        return data;\r\n      }\r\n      return Promise.reject()\r\n    })\r\n}\r\n\r\nfunction logoutRequest(): Promise<SimpleResponse> {\r\n  const token = localStorage.getItem('token');\r\n  return fetch('https://norma.nomoreparties.space/api/auth/logout', {\r\n    method: 'post',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token\r\n    })\r\n  })\r\n    .then(responseParse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        deleteCookie('token');\r\n        localStorage.removeItem('token');\r\n      }\r\n      return data;\r\n    })\r\n}\r\n\r\nfunction tokenRequest(): Promise<RefreshResponse> {\r\n  const token = localStorage.getItem('token');\r\n  return fetch('https://norma.nomoreparties.space/api/auth/token', {\r\n    method: 'post',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token\r\n    })\r\n  })\r\n    .then(responseParse)\r\n    .then((data: RefreshResponse) => {\r\n      if (data.success) {\r\n        localStorage.setItem('token', data.refreshToken);\r\n        return data;\r\n      }\r\n      return Promise.reject();\r\n    })\r\n}\r\n\r\nfunction userInfoRequest(): Promise<UserResponse> {\r\n  return fetch('https://norma.nomoreparties.space/api/auth/user', {\r\n    method: 'get',\r\n    headers: {\r\n      'Authorization': getCookie('token') as string\r\n    }\r\n  })\r\n    .then(responseParse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        return data;\r\n      }\r\n      return Promise.reject(data);\r\n    })\r\n    .catch(err => {\r\n      if (err.message === 'jwt expired') {\r\n        return tokenRequest()\r\n          .then(data => {\r\n            setCookie('token', data.accessToken);\r\n            localStorage.setItem('token', data.refreshToken)\r\n            return fetch('https://norma.nomoreparties.space/api/auth/user', {\r\n              method: 'get',\r\n              headers: {\r\n                'Authorization': getCookie('token') as string\r\n              }\r\n            })\r\n              .then(responseParse)\r\n          })\r\n      } else {\r\n        return Promise.reject(err);\r\n      }\r\n    })\r\n}\r\n\r\nfunction updateUserInfo(user: TSimpleUserInfo): Promise<UserResponse> {\r\n  return fetch('https://norma.nomoreparties.space/api/auth/user', {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': getCookie('token') as string\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(responseParse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        return data;\r\n      }\r\n      return Promise.reject();\r\n    })\r\n}\r\n\r\nfunction resetPasswordRequest(email: string): Promise<SimpleResponse> {\r\n  return fetch('https://norma.nomoreparties.space/api/password-reset', {\r\n    method: 'post',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email\r\n    })\r\n  })\r\n    .then(responseParse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        return data;\r\n      }\r\n      return Promise.reject(data);\r\n    })\r\n}\r\n\r\nfunction resetPassword(token: string, password: string) {\r\n  return fetch('https://norma.nomoreparties.space/api/password-reset/reset', {\r\n    method: 'post',\r\n    headers: {\r\n      'content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token,\r\n      password\r\n    })\r\n  })\r\n    .then(responseParse)\r\n    .then(data => {\r\n      if (data.success) {\r\n        return data;\r\n      }\r\n      return Promise.reject(data);\r\n    })\r\n}\r\n\r\nexport {\r\n  tokenRequest,\r\n  loginRequest,\r\n  logoutRequest,\r\n  registerRequest,\r\n  updateUserInfo,\r\n  userInfoRequest,\r\n  resetPasswordRequest,\r\n  resetPassword\r\n}\r\n","import { createAsyncThunk, createSlice, Draft, PayloadAction } from '@reduxjs/toolkit';\r\nimport {\r\n  loginRequest,\r\n  logoutRequest,\r\n  registerRequest,\r\n  updateUserInfo,\r\n  userInfoRequest\r\n} from '../utils/auth';\r\nimport { TSimpleUserInfo } from '../types';\r\n\r\nexport type UserInfo = {\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\ntype AuthState = {\r\n  user: UserInfo;\r\n  error?: boolean;\r\n}\r\n\r\ntype LoginRequest = {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\ntype RegisterRequest = LoginRequest & {\r\n  name: string;\r\n}\r\n\r\nconst loginAction = createAsyncThunk(\r\n  'auth/login',\r\n  async ({ email, password }: LoginRequest) => {\r\n    return loginRequest(email, password)\r\n  }\r\n);\r\n\r\nconst logoutAction = createAsyncThunk(\r\n  'auth/logout',\r\n  async () => logoutRequest()\r\n)\r\n\r\nconst registerAction = createAsyncThunk(\r\n  'auth/register',\r\n  async ({ email, name, password }: RegisterRequest) => {\r\n    return registerRequest(email, name, password);\r\n  }\r\n)\r\n\r\nconst getUserAction = createAsyncThunk(\r\n  'auth/getUser',\r\n  async () => userInfoRequest()\r\n)\r\n\r\nconst updateUserAction = createAsyncThunk(\r\n  'auth/updateUser',\r\n  async (user: TSimpleUserInfo) => updateUserInfo(user)\r\n)\r\n\r\nconst initialState: AuthState = {\r\n  user: {\r\n    name: '',\r\n    email: ''\r\n  },\r\n  error: false\r\n}\r\n\r\nconst auth = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    setUser(state: Draft<AuthState>, action: PayloadAction<TSimpleUserInfo>) {\r\n      state.user.email = action.payload.email;\r\n      state.user.name = action.payload.name;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(loginAction.pending, (state) => {\r\n        state.error = false;\r\n        state.user.email = '';\r\n        state.user.name = '';\r\n      })\r\n      .addCase(loginAction.fulfilled, (state, action) => {\r\n        state.user.email = action.payload.user.email;\r\n        state.user.name = action.payload.user.name;\r\n      })\r\n      .addCase(loginAction.rejected, (state) => {\r\n        state.error = true\r\n      })\r\n      .addCase(registerAction.pending, state => {\r\n        state.error = false;\r\n        state.user.email = '';\r\n        state.user.name = '';\r\n      })\r\n      .addCase(registerAction.fulfilled, (state, action) => {\r\n        state.user.email = action.payload.user.email;\r\n        state.user.name = action.payload.user.name;\r\n      })\r\n      .addCase(registerAction.rejected, (state) => {\r\n        state.error = true;\r\n      })\r\n      .addCase(logoutAction.pending, (state) => {\r\n        state.error = false;\r\n      })\r\n      .addCase(logoutAction.fulfilled, (state) => {\r\n        state.user.name = ''\r\n        state.user.email = ''\r\n      })\r\n      .addCase(getUserAction.pending, (state) => {\r\n        state.user.name = ''\r\n        state.user.email = ''\r\n        state.error = false;\r\n      })\r\n      .addCase(getUserAction.fulfilled, (state, action) => {\r\n        state.user.name = action.payload.user.name;\r\n        state.user.email = action.payload.user.email;\r\n      })\r\n      .addCase(getUserAction.rejected, (state) => {\r\n        state.error = true;\r\n      })\r\n      .addCase(updateUserAction.fulfilled, (state, action) => {\r\n        state.user.name = action.payload.user.name;\r\n        state.user.email = action.payload.user.email;\r\n      })\r\n  }\r\n})\r\n\r\nconst {\r\n  setUser\r\n} = auth.actions\r\n\r\nexport {\r\n  auth,\r\n  setUser,\r\n  registerAction,\r\n  loginAction,\r\n  logoutAction,\r\n  getUserAction,\r\n  updateUserAction\r\n}\r\n","import { FeedItem } from './orders';\r\n\r\nfunction mergeOrders(newOrders: FeedItem[], oldItems: FeedItem[]): FeedItem[] {\r\n  const temp = [...oldItems];\r\n  newOrders.forEach((val: FeedItem) => {\r\n    const id = val._id;\r\n    const idx = temp.findIndex(e => e._id === id);\r\n    if (idx === -1) {\r\n      temp.splice(0, 0, val);\r\n    } else {\r\n      temp.splice(idx, 1, { ...val });\r\n    }\r\n  });\r\n  return temp;\r\n}\r\n\r\nexport default mergeOrders;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { fetchFeed, FeedItem } from '../utils/orders';\r\nimport mergeOrders from '../utils/mergeOrders';\r\n\r\nconst defaultState = {\r\n  feed: [] as FeedItem[],\r\n  total: 0,\r\n  totalToday: 0,\r\n  loading: false,\r\n  hasError: false\r\n};\r\n\r\nconst loadFeed = createAsyncThunk(\r\n  'load/feed',\r\n  () => fetchFeed()\r\n);\r\n\r\nconst feed = createSlice({\r\n  name: 'feed',\r\n  initialState: defaultState,\r\n  reducers: {\r\n    setFeed: ((state, action: PayloadAction<FeedItem[]>) => {\r\n      state.feed = action.payload;\r\n    }),\r\n    updateFeed: (state, action) => {\r\n      const newOrders = action.payload.orders;\r\n      if (Array.isArray(newOrders)) {\r\n        state.feed = mergeOrders(newOrders, state.feed);\r\n      } else {\r\n        console.error('Incorrect payload: ', action.payload);\r\n      }\r\n      state.total = action.payload.total;\r\n      state.totalToday = action.payload.totalToday;\r\n    }\r\n  },\r\n  extraReducers: (builder => {\r\n    builder\r\n      .addCase(loadFeed.pending, (state) => {\r\n        state.loading = true;\r\n        state.hasError = false;\r\n      })\r\n      .addCase(loadFeed.fulfilled, (state, action) => {\r\n        state.feed = [...action.payload.orders];\r\n        state.total = action.payload.total;\r\n        state.totalToday = action.payload.totalToday;\r\n        state.loading = false;\r\n      })\r\n      .addCase(loadFeed.rejected, (state) => {\r\n        state.feed = [];\r\n        state.loading = false;\r\n        state.hasError = true;\r\n      })\r\n  })\r\n});\r\n\r\nconst updateFeedAction = feed.actions.updateFeed;\r\n\r\nexport {\r\n  feed,\r\n  loadFeed,\r\n  updateFeedAction\r\n};\r\n","import { getCookie } from './cookies';\r\n\r\ninterface FeedItem {\r\n  createdAt: string\r\n  ingredients: string[]\r\n  name: string\r\n  number: number\r\n  status: string\r\n  updatedAt: string\r\n  _id: string\r\n}\r\n\r\ninterface FeedResponse {\r\n  success: boolean;\r\n  orders: FeedItem[];\r\n  total: number;\r\n  totalToday: number;\r\n}\r\n\r\nfunction fetchFeed(): Promise<FeedResponse> {\r\n  return fetch(`${process.env.REACT_APP_API_DOMAIN}/api/orders/all`)\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json()\r\n      }\r\n      return Promise.reject(response.statusText)\r\n    })\r\n    .then(json => {\r\n      if (json.success) {\r\n        return json;\r\n      }\r\n      return Promise.reject()\r\n    })\r\n}\r\n\r\nfunction fetchUserOrders(): Promise<FeedItem[]> {\r\n  return fetch(`${process.env.REACT_APP_API_DOMAIN}/api/orders`, {\r\n    headers: {\r\n      'Authorization': getCookie('token') as string\r\n    }\r\n  })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json()\r\n      }\r\n      return Promise.reject(response.statusText)\r\n    })\r\n    .then(json => {\r\n      if (json.success) {\r\n        return json.orders;\r\n      }\r\n      return Promise.reject()\r\n    })\r\n}\r\n\r\nexport type {\r\n  FeedItem\r\n}\r\n\r\nexport {\r\n  fetchFeed,\r\n  fetchUserOrders\r\n}\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { FeedItem, fetchUserOrders } from '../utils/orders';\r\nimport mergeOrders from '../utils/mergeOrders';\r\n\r\nconst defaultState = {\r\n  orders: [] as FeedItem[],\r\n  loading: false,\r\n  hasError: false\r\n};\r\n\r\nconst loadOrders = createAsyncThunk(\r\n  'orders/load',\r\n  () => fetchUserOrders()\r\n);\r\nconst orders = createSlice({\r\n  name: 'orders',\r\n  initialState: defaultState,\r\n  reducers: {\r\n    // only test purposes\r\n    resetState: (state) => {\r\n      state.orders = [];\r\n      state.loading = false;\r\n      state.hasError = false;\r\n    },\r\n    updateOrdersAction: (state, action) => {\r\n      const newOrders = action.payload.orders;\r\n      if (Array.isArray(newOrders)) {\r\n        state.orders = mergeOrders(newOrders, state.orders);\r\n      } else {\r\n        console.error('Incorrect payload: ', action.payload)\r\n      }\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(loadOrders.pending, (state) => {\r\n        state.loading = true;\r\n        state.hasError = false;\r\n      })\r\n      .addCase(loadOrders.fulfilled, (state, action) => {\r\n        state.orders = [...action.payload || []];\r\n        state.loading = false;\r\n      })\r\n      .addCase(loadOrders.rejected, (state) => {\r\n        state.orders = [];\r\n        state.loading = false;\r\n        state.hasError = true;\r\n      })\r\n  }\r\n});\r\n\r\nconst {\r\n  resetState,\r\n  updateOrdersAction\r\n} = orders.actions;\r\n\r\nexport {\r\n  orders,\r\n  loadOrders,\r\n  resetState,\r\n  updateOrdersAction\r\n}\r\n","interface Ingredient {\r\n  _id: string;\r\n  name: string;\r\n  type: 'main' | 'bun' | 'sauce';\r\n  proteins: number;\r\n  fat: number;\r\n  carbohydrates: number;\r\n  calories: number;\r\n  price: number;\r\n  image: string;\r\n  image_mobile: string;\r\n  image_large: string;\r\n  __v: number;\r\n}\r\n\r\nfunction fetchIngredients(): Promise<Ingredient[]> {\r\n  return window.fetch(`${process.env.REACT_APP_API_DOMAIN}/api/ingredients`)\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(response.statusText)\r\n    })\r\n    .then(jsonData => jsonData.data);\r\n}\r\n\r\nexport type {\r\n  Ingredient\r\n}\r\n\r\nexport default fetchIngredients;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport fetchIngredients, { Ingredient } from '../utils/ingredients';\r\n\r\nconst ingredientsState = {\r\n  ingredients: [] as Ingredient[],\r\n  loading: false,\r\n  hasError: false,\r\n};\r\n\r\nconst loadIngredients = createAsyncThunk(\r\n  'ingredients/load',\r\n  async () => {\r\n    return fetchIngredients();\r\n  }\r\n);\r\n\r\nconst ingredients = createSlice({\r\n  name: 'ingredients',\r\n  initialState: ingredientsState,\r\n  reducers: {\r\n    setIngredients: (state, action: PayloadAction<Ingredient[]>) => {\r\n      state.ingredients = action.payload\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(loadIngredients.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(loadIngredients.fulfilled, (state, action) => {\r\n        state.ingredients = action.payload;\r\n        state.loading = false;\r\n        state.hasError = false;\r\n      })\r\n      .addCase(loadIngredients.rejected, (state, action) => {\r\n        state.ingredients = [];\r\n        state.loading = false;\r\n        state.hasError = true;\r\n      })\r\n  }\r\n})\r\n\r\nconst { setIngredients } = ingredients.actions;\r\n\r\nexport {\r\n  ingredients,\r\n  setIngredients,\r\n  loadIngredients,\r\n  ingredientsState\r\n}\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { Ingredient } from '../utils/ingredients';\r\n\r\nconst constructorState = {\r\n  main: [] as Ingredient[],\r\n  bun: undefined as (Ingredient | undefined)\r\n}\r\n\r\nconst constructor = createSlice({\r\n  name: 'constructor',\r\n  initialState: constructorState,\r\n  reducers: {\r\n    addIngredient: (state, action: PayloadAction<Ingredient>) => {\r\n      if (action.payload.type === 'bun') {\r\n        state.bun = action.payload\r\n      } else {\r\n        state.main.push(action.payload);\r\n      }\r\n    },\r\n    removeIngredient: (state, action: PayloadAction<string>) => {\r\n      const ingredientId = action.payload;\r\n      const index = state.main.findIndex((item) => item._id === ingredientId);\r\n      if (index >= 0) {\r\n        state.main.splice(index, 1);\r\n      }\r\n    },\r\n    clearIngredients: (state) => {\r\n      state.main = [];\r\n      state.bun = undefined;\r\n    },\r\n    reorderIngredient: (state, action: PayloadAction<[string, number]>) => {\r\n      const [id, index] = action.payload;\r\n      const oldIndex = state.main.findIndex((item) => item._id === id);\r\n      if (oldIndex>= 0 && oldIndex !== index) {\r\n        const [deleted] = state.main.splice(oldIndex, 1);\r\n        state.main.splice(index, 0, deleted);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nexport {\r\n  constructor,\r\n  constructorState\r\n}\r\n","export const WS_CONNECTION_START = 'WS_CONNECTION_START' as const;\r\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS' as const;\r\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR' as const;\r\nexport const WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED' as const;\r\nexport const WS_CONNECTION_CLOSE = 'WS_CONNECTION_CLOSE' as const;\r\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE' as const;\r\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE' as const;\r\n","import { configureStore } from '@reduxjs/toolkit'\r\nimport thunk from 'redux-thunk';\r\nimport { auth } from './auth';\r\nimport { feed } from './feed';\r\nimport { orders } from './orders';\r\nimport { ingredients, loadIngredients, setIngredients, ingredientsState } from './ingredients';\r\nimport { constructor, constructorState } from './constructor';\r\nimport { socketMiddleware } from './middleware/socketMiddleware';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst {\r\n  clearIngredients,\r\n  reorderIngredient,\r\n  addIngredient,\r\n  removeIngredient\r\n} = constructor.actions;\r\n\r\nconst reducer = {\r\n  [ingredients.name]: ingredients.reducer,\r\n  [constructor.name]: constructor.reducer,\r\n  [auth.name]: auth.reducer,\r\n  [feed.name]: feed.reducer,\r\n  [orders.name]: orders.reducer\r\n}\r\n\r\nconst store = configureStore({\r\n  reducer,\r\n  preloadedState: {\r\n    constructor: constructorState,\r\n    ingredients: ingredientsState\r\n  },\r\n  middleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware().concat([thunk, socketMiddleware()]),\r\n  devTools: process.env.NODE_ENV !== 'production'\r\n})\r\n\r\ntype StoreType = ReturnType<typeof store.getState>\r\ntype StoreDispatch = typeof store.dispatch;\r\n\r\nconst useStoreDispatch = () => useDispatch<StoreDispatch>()\r\n\r\nexport type {\r\n  StoreType,\r\n  StoreDispatch\r\n}\r\n\r\nexport {\r\n  setIngredients,\r\n  loadIngredients,\r\n  clearIngredients,\r\n  reorderIngredient,\r\n  addIngredient,\r\n  removeIngredient,\r\n  useStoreDispatch\r\n}\r\n\r\nexport default store;\r\n","\r\nimport { getCookie } from '../../utils/cookies';\r\nimport { Action, AnyAction, Middleware } from 'redux';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { updateFeedAction } from '../feed';\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_SEND_MESSAGE,\r\n  WS_GET_MESSAGE,\r\n  WS_CONNECTION_CLOSE\r\n} from '../action-types'\r\nimport { updateOrdersAction } from '../orders';\r\n\r\ntype SocketMiddleware<S = {}, A extends Action = AnyAction, E = undefined> =\r\n  Middleware<ThunkDispatch<S, E, A>, S, ThunkDispatch<S, E, A>>;\r\n\r\nfunction socketMiddleware(): SocketMiddleware {\r\n  return store => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return next => action => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      if (type === WS_CONNECTION_START) {\r\n        const { wsUrl, wsType } = payload;\r\n        socket = new WebSocket(wsUrl);\r\n        socket.onopen = () => {\r\n          dispatch({ type: WS_CONNECTION_SUCCESS });\r\n        };\r\n\r\n        socket.onerror = () => {\r\n          dispatch({\r\n            type: WS_CONNECTION_ERROR,\r\n            payload: { code: -1, reason: 'Unexpected Error' }\r\n          });\r\n        };\r\n\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n          if (wsType === 'orders') {\r\n            dispatch(updateOrdersAction(restParsedData));\r\n          } else if (wsType === 'feed') {\r\n            dispatch(updateFeedAction(restParsedData));\r\n          }\r\n\r\n          dispatch({ type: WS_GET_MESSAGE, payload: restParsedData });\r\n        };\r\n\r\n        socket.onclose = ({code, reason }) => {\r\n          dispatch({ type: WS_CONNECTION_CLOSED, payload: { code, reason } });\r\n        };\r\n      }\r\n      if (socket) {\r\n        if (type === WS_SEND_MESSAGE) {\r\n          const token = getCookie('token')\r\n          const message = { ...payload, token };\r\n          socket.send(JSON.stringify(message));\r\n        } else if (type === WS_CONNECTION_CLOSE) {\r\n          socket.close(1000, 'Closed by peer');\r\n          socket = null;\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n}\r\n\r\nexport {\r\n  socketMiddleware\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Ingredient } from '../utils/ingredients';\r\nimport { UserInfo } from './auth';\r\nimport { FeedItem } from '../utils/orders';\r\nimport { StoreType } from './store';\r\n\r\nfunction useStoreSelector<TSelected>(selector: (state: StoreType) => TSelected) {\r\n  return useSelector<StoreType, TSelected>(selector);\r\n}\r\n\r\nfunction useIngredientsSelector() {\r\n  return useSelector<StoreType, Ingredient[]>(state => state.ingredients.ingredients);\r\n}\r\n\r\nfunction useUserSelector() {\r\n  return useSelector<StoreType, UserInfo>(state => state.auth.user)\r\n}\r\n\r\nfunction useOrdersSelector() {\r\n  return useSelector<StoreType, FeedItem[]>(state => state.orders.orders)\r\n}\r\n\r\nfunction useFeedSelector() {\r\n  return useSelector<StoreType, FeedItem[]>(state => state.feed.feed)\r\n}\r\n\r\nfunction useConstructorSelector() {\r\n  return useSelector<StoreType, StoreType['constructor']>(state => state.constructor)\r\n}\r\n\r\nexport {\r\n  useStoreSelector,\r\n  useIngredientsSelector,\r\n  useUserSelector,\r\n  useFeedSelector,\r\n  useOrdersSelector,\r\n  useConstructorSelector\r\n}\r\n","import React, { FunctionComponent, useCallback } from 'react';\r\nimport classnames from 'classnames';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport BurgerIngredient from '../burger-ingredient';\r\nimport { addIngredient, useStoreDispatch } from '../../services/store';\r\nimport { useConstructorSelector } from '../../services/selectors';\r\n\r\ninterface OwnProps {\r\n  titleClassName?: string;\r\n  itemsClassName?: string;\r\n  titleRef?: React.RefObject<HTMLDivElement>;\r\n  title: string;\r\n  items: Ingredient[],\r\n  onShowDetails: (item: Ingredient) => void;\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst BurgerIngredientsSection: FunctionComponent<Props> = ({\r\n  title,\r\n  items,\r\n  itemsClassName,\r\n  titleRef,\r\n  onShowDetails\r\n}) => {\r\n  const dispatch = useStoreDispatch();\r\n  const { main, bun } = useConstructorSelector();\r\n  const getCount = useCallback((id: string) => {\r\n    if (bun && bun._id === id) {\r\n      return 2;\r\n    }\r\n    if (main) {\r\n      return main.filter(e => e._id === id).length;\r\n    }\r\n    return 0;\r\n  }, [main, bun]);\r\n  const onIngredientClick = (item: Ingredient) => {\r\n    dispatch(addIngredient(item))\r\n  }\r\n  return (\r\n    <>\r\n      <div ref={ titleRef }>\r\n          <span className=\"text text_type_main-medium\">\r\n            { title }\r\n          </span>\r\n      </div>\r\n      <div className={ classnames('mt-10 pt-4 pl-4', itemsClassName) }>\r\n        {\r\n          items.map(item => {\r\n            return (\r\n              <BurgerIngredient\r\n                key={ item._id }\r\n                item={item}\r\n                onClick={ () => onIngredientClick(item) }\r\n                onImageClick={() => onShowDetails(item)}\r\n                count={ getCount(item._id) }\r\n              />\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredientsSection;\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\ntype Options = {\r\n  passive?: boolean;\r\n  once?: boolean;\r\n  capture?: boolean;\r\n};\r\n\r\n/**\r\n * Хук для подписки на события дом элементов находящихся в <code>elementRef</code>\r\n *\r\n * @param eventName имя события\r\n * @param handler прослушиватель\r\n * @param elementRef ссылка на DOM-элемент, к которому надо добавить подписку на событие\r\n * @param options опции подписки\r\n */\r\nfunction useEventListener\r\n<Handler extends EventListener = EventListener,\r\n  RefType extends HTMLElement = HTMLElement>\r\n(\r\n  eventName: string,\r\n  handler: Handler,\r\n  elementRef: React.RefObject<RefType>,\r\n  options: Options = {}\r\n) {\r\n  // Так как eslint не видит глобальный EventListener\r\n  // eslint-disable-next-line no-undef\r\n  const savedHandler = useRef<EventListener>();\r\n  const { capture, passive, once } = options;\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    if (elementRef != null && elementRef.current != null) {\r\n      const { current } = elementRef;\r\n      if (!current.addEventListener) {\r\n        return () => {};\r\n      }\r\n\r\n      const eventListener = (event: Event) => savedHandler.current && savedHandler.current(event);\r\n      const opts = { capture, once, passive };\r\n      current.addEventListener(eventName, eventListener, opts);\r\n      return () => {\r\n        if (current) {\r\n          current.removeEventListener(eventName, eventListener, opts);\r\n        }\r\n      };\r\n    }\r\n    return () => {};\r\n  }, [eventName, elementRef, capture, passive, once]);\r\n}\r\n\r\nexport default useEventListener;\r\n","import BurgerIngredients from './burger-ingredients';\r\n\r\nexport default BurgerIngredients;\r\n","import classnames from 'classnames';\r\nimport React, { FunctionComponent, useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-ingredients.module.css';\r\nimport BurgerIngredientsSection from './burger-ingredients-section';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport { loadIngredients, useStoreDispatch } from '../../services/store';\r\nimport useEventListener from '../../hooks/use-event-listener';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useIngredientsSelector } from '../../services/selectors';\r\n\r\ninterface OwnProps {\r\n  className?: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst BurgerIngredients: FunctionComponent<Props> = ({\r\n  className\r\n}) => {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const scrollerRef = useRef<HTMLDivElement>(null);\r\n  const dispatch = useStoreDispatch();\r\n  const ingredients = useIngredientsSelector();\r\n  const bunRef = useRef<HTMLDivElement>(null);\r\n  const sauceRef = useRef<HTMLDivElement>(null);\r\n  const mainRef = useRef<HTMLDivElement>(null);\r\n  const [tabValue, setTabValue] = useState<string>('Булки');\r\n  const onScroll = useCallback(() => {\r\n    if (scrollerRef.current && bunRef.current && sauceRef.current && mainRef.current) {\r\n      const bunTop = bunRef.current.offsetTop;\r\n      const mainTop = mainRef.current.offsetTop;\r\n      const sauceTop = sauceRef.current.offsetTop;\r\n      const scroll = scrollerRef.current.scrollTop + 0.5 * scrollerRef.current.clientHeight;\r\n      if (Math.abs(bunTop - scroll) < Math.abs(sauceTop - scroll)) {\r\n        setTabValue('Булки');\r\n      } else if (Math.abs(sauceTop - scroll) < Math.abs(mainTop - scroll)) {\r\n        setTabValue('Соусы')\r\n      } else {\r\n        setTabValue('Начинки')\r\n      }\r\n    }\r\n  }, []);\r\n  useEventListener('scroll', onScroll, scrollerRef);\r\n  useEffect(() => {\r\n    dispatch(loadIngredients());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n  const onTabClick = (id: string) => {\r\n    if (id === 'Булки') {\r\n      bunRef.current?.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else if (id === 'Начинки') {\r\n      mainRef.current?.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else if (id === 'Соусы') {\r\n      sauceRef.current?.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    }\r\n    setTabValue(id);\r\n  }\r\n  const onShowDetails = useCallback(({ _id }: Ingredient) => {\r\n    history.push({\r\n      pathname: \"/ingredient/\" + _id,\r\n      state: {\r\n        background: location\r\n      }\r\n    })\r\n  }, [history, location]);\r\n  return (\r\n    <div className={classnames(className, styles['burger-ingredients'], 'mt-10')}>\r\n      <span className='text text_type_main-medium'>Соберите бургер</span>\r\n      <div style={{ display: 'flex' }} className=\"mt-5\">\r\n        <Tab\r\n          active={tabValue === 'Булки'}\r\n          value={'Булки'}\r\n          onClick={onTabClick}\r\n          children={\"Булки\"} />\r\n        <Tab\r\n          active={tabValue === 'Соусы'}\r\n          value={'Соусы'}\r\n          onClick={onTabClick}\r\n          children={\"Соусы\"} />\r\n        <Tab\r\n          active={tabValue === 'Начинки'}\r\n          value={'Начинки'}\r\n          onClick={onTabClick}\r\n          children={\"Начинки\"} />\r\n      </div>\r\n      <div className={classnames('mt-10', styles['burger-ingredients-scroller'])} ref={scrollerRef}>\r\n        <BurgerIngredientsSection\r\n          titleRef={bunRef}\r\n          title=\"Булки\"\r\n          items={ingredients.filter(e=> e.type === 'bun')}\r\n          itemsClassName={styles['burger-ingredients-container']}\r\n          onShowDetails={onShowDetails}\r\n        />\r\n        <BurgerIngredientsSection\r\n          titleRef={sauceRef}\r\n          title=\"Соусы\"\r\n          items={ingredients.filter(e=> e.type === 'sauce')}\r\n          itemsClassName={styles['burger-ingredients-container']}\r\n          onShowDetails={onShowDetails}\r\n        />\r\n        <BurgerIngredientsSection\r\n          titleRef={mainRef}\r\n          title=\"Начинки\"\r\n          items={ingredients.filter(e=> e.type === 'main')}\r\n          itemsClassName={styles['burger-ingredients-container']}\r\n          onShowDetails={onShowDetails}\r\n        />\r\n      </div>\r\n    </div>);\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nfunction usePortal(id: string) {\r\n  const rootElemRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(function setupElement() {\r\n    const parentElem = document.querySelector(`#${ id }`) as Element;\r\n\r\n    if (rootElemRef.current) {\r\n      parentElem.appendChild(rootElemRef.current);\r\n    }\r\n\r\n    return function removeElement() {\r\n      if (rootElemRef.current) {\r\n        rootElemRef.current.remove();\r\n      }\r\n    };\r\n  }, [id]);\r\n\r\n  function getRootElem() {\r\n    if (!rootElemRef.current) {\r\n      rootElemRef.current = document.createElement('div');\r\n    }\r\n    return rootElemRef.current;\r\n  }\r\n\r\n  return getRootElem();\r\n}\r\n\r\nexport default usePortal;\r\n","import React from 'react';\r\nimport usePortal from '../../hooks/use-portal';\r\nimport { createPortal } from 'react-dom';\r\n\r\ntype Props = {\r\n  id: string;\r\n}\r\n\r\nfunction Portal({ id, children }: React.PropsWithChildren<Props>): JSX.Element {\r\n  const target = usePortal(id);\r\n  return createPortal(\r\n    children,\r\n    target\r\n  )\r\n}\r\n\r\nexport default Portal;\r\n","import React, { useRef } from 'react';\r\nimport styles from './modal-overlay.module.css';\r\n\r\ntype Props = {\r\n  onClick?: () => void;\r\n}\r\n\r\nexport default function ModalOverlay({ children, onClick }: React.PropsWithChildren<Props>) {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const onOverlayClick: React.MouseEventHandler = (evt) => {\r\n    evt.stopPropagation();\r\n    if (onClick) {\r\n      if (evt.target === ref.current) {\r\n        onClick();\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <div ref={ref} className={styles['modal-overlay']} onClick={onOverlayClick}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './modal.module.css';\r\nimport Portal from '../portal/portal';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\ntype Props = {\r\n  title?: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function Modal({ children, title, onClose }: React.PropsWithChildren<Props>) {\r\n  useEffect(() => {\r\n    function onKeyPress(evt: KeyboardEvent) {\r\n      if (evt.key === 'Escape') {\r\n        onClose();\r\n      }\r\n      console.log(evt.key);\r\n    }\r\n    document.addEventListener('keyup', onKeyPress);\r\n    return () => {\r\n      document.removeEventListener('keyup', onKeyPress);\r\n    }\r\n  }, [onClose]);\r\n  return (\r\n    <Portal id={'modal'}>\r\n      <ModalOverlay onClick={onClose}>\r\n        <div className={styles['modal']}>\r\n          <div className={`${styles['modal__header']} ml-10 mr-10 mt-10`}>\r\n            <span className={`${styles['modal__title']} text text_type_main-medium`}>{title}</span>\r\n            <CloseIcon type={'primary'} onClick={onClose}/>\r\n          </div>\r\n          <div className={`${styles['modal__body']} ml-10 mr-10 mb-10`}>\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </ModalOverlay>\r\n    </Portal>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/order-done.7e039d55.svg\";","import React, { useEffect } from 'react';\r\nimport Modal from '../modal/modal';\r\nimport styles from './order-details.module.css';\r\nimport orderDoneImage from '../../images/order-done.svg';\r\n\r\ntype Props = {\r\n  onClose: () => void;\r\n  orderNum: number\r\n}\r\n\r\nfunction OrderDetails({ onClose, orderNum }: Props) {\r\n  useEffect(() => {\r\n    new Image().src = orderDoneImage;\r\n  }, []);\r\n  return (\r\n    <Modal onClose={ onClose }>\r\n      <div className={ `${ styles['content'] } text text_type_main-default` }>\r\n            <span className={ `text_type_digits-large mt-2 ${ styles['order-number'] }` }>\r\n              { orderNum }\r\n            </span>\r\n        <span className=\"mt-8\">идентификатор заказа</span>\r\n        <span className=\"mt-15\">\r\n              <img alt=\"check\" src={ orderDoneImage } width={ 120 } height={ 120 }/>\r\n            </span>\r\n        <span className=\"mt-15\">Ваш заказ начали готовить</span>\r\n        <span className=\"mt-2 mb-30 text_color_inactive\">\r\n              Дождитесь готвоности на орбитальной станции\r\n            </span>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default OrderDetails;\r\n","import { getCookie } from './cookies';\r\n\r\ninterface Order {\r\n  name: string,\r\n  order: {\r\n    number: number\r\n  },\r\n  success: boolean\r\n}\r\n\r\nfunction getOrder(ingredientIds: string[]): Promise<Order> {\r\n  const headers: HeadersInit = {\r\n    'Content-Type': 'application/json'\r\n  };\r\n  const token = getCookie('token');\r\n  if (token) {\r\n    headers['Authorization'] = token;\r\n  }\r\n  return fetch('https://norma.nomoreparties.space/api/orders', {\r\n    headers,\r\n    method: 'POST',\r\n    body: JSON.stringify({ingredients: ingredientIds})\r\n  })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(response.statusText)\r\n    });\r\n}\r\n\r\nexport default getOrder;\r\n","import React, { useRef } from 'react';\r\nimport classnames from 'classnames';\r\nimport styles from './burger-constructor-item.module.css';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { removeIngredient, reorderIngredient, useStoreDispatch } from '../../services/store';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport { useDrag, useDrop, XYCoord } from 'react-dnd';\r\n\r\ninterface OwnProps {\r\n  item: Ingredient;\r\n  index: number;\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\ntype TDragObject = {\r\n  id: string;\r\n  index: number;\r\n}\r\n\r\nconst BurgerConstructorItem = ({ item, index }: Props) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const dispatch = useStoreDispatch();\r\n\r\n  const [,dropRef] = useDrop<TDragObject, never, never>({\r\n    accept: 'ingredient',\r\n    hover: (obj, monitor) => {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = obj.index;\r\n      const hoverIndex = index;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset() as XYCoord;\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      dispatch(reorderIngredient([obj.id, hoverIndex]));\r\n      obj.index = hoverIndex;\r\n    }\r\n  });\r\n  const [, dragRef] = useDrag<TDragObject, never, never>({\r\n    item: {\r\n      id: item._id,\r\n      index\r\n    },\r\n    type: 'ingredient'\r\n  }, [index, item._id]);\r\n\r\n  dragRef(dropRef(ref));\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className={\r\n        classnames(\r\n          styles['burger-constructor-item'],\r\n          styles['burger-constructor-item__draggable']\r\n        ) }\r\n    >\r\n      <DragIcon type={ 'primary' }/>\r\n      <ConstructorElement\r\n        text={ item.name }\r\n        thumbnail={ item.image }\r\n        price={ item.price }\r\n        handleClose={ () => dispatch(removeIngredient(item._id)) }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructorItem;\r\n","import React, { FunctionComponent, useEffect, useState } from 'react';\r\nimport {\r\n  Button,\r\n  ConstructorElement,\r\n  CurrencyIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport classnames from 'classnames';\r\nimport styles from './burger-constructor.module.css'\r\nimport OrderDetails from '../order-details/order-details';\r\nimport { clearIngredients, useStoreDispatch } from '../../services/store';\r\nimport getOrder from '../../utils/get-order';\r\nimport BurgerConstructorItem from '../burger-constructor-element/burger-constructor-item';\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useConstructorSelector, useUserSelector } from '../../services/selectors';\r\n\r\ninterface OwnProps {\r\n\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nfunction disabledOrderClick() {\r\n  console.warn('Order click disabled');\r\n}\r\n\r\nconst BurgerConstructor: FunctionComponent<Props> = () => {\r\n  const dispatch = useStoreDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const { name } = useUserSelector();\r\n  const token = localStorage.getItem('token');\r\n  const { main, bun } = useConstructorSelector();\r\n  const [coDisable, setCODisable] = useState(false);\r\n  const [orderNum, setOrderNum] = useState(0);\r\n  const [showOrder, setShowOrder] = useState(false);\r\n  const [price, setPrice] = useState(0);\r\n  useEffect(() => {\r\n    const newTotal = main.reduce(\r\n      (prev, curr) => prev + curr.price, 0);\r\n    if (bun) {\r\n      setPrice(newTotal + 2 * bun.price);\r\n    } else {\r\n      setPrice(newTotal);\r\n    }\r\n\r\n  }, [main, bun]);\r\n  const [,drop] = useDrop({\r\n    accept: 'ingredient',\r\n  }, []);\r\n  const [,dropSource] = useDrop({\r\n    accept: 'source',\r\n    drop: () => ({name: 'constructor'}),\r\n  }, [])\r\n  const onCloseOrder = () => {\r\n    setShowOrder(false);\r\n    dispatch(clearIngredients());\r\n  };\r\n  const onOrderClick = () => {\r\n    setCODisable(true)\r\n    if (main.length || bun) {\r\n      if (!name && !token) {\r\n        history.replace({\r\n          pathname: \"/login\",\r\n          state: {\r\n            from: location\r\n          }\r\n        });\r\n        return;\r\n      }\r\n      try {\r\n        getOrder([...main.map(e => e._id), bun._id, bun._id])\r\n          .then(order => {\r\n            setOrderNum(order.order.number)\r\n            setShowOrder(true);\r\n            setCODisable(false)\r\n          })\r\n          .catch(err => {\r\n            console.error(err);\r\n            setCODisable(false)\r\n          })\r\n      } finally {\r\n        setCODisable(false);\r\n      }\r\n    } else {\r\n      setCODisable(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={ 'mt-25' } style={ { flex: '1', maxWidth: '592px' } } ref={dropSource}>\r\n      <div style={ { display: 'flex', flexDirection: 'column', gap: '10px' } }>\r\n        { bun && (\r\n          <div className={ styles['burger-constructor-item'] } data-cy=\"constructor-bun-top\">\r\n            <ConstructorElement\r\n              type=\"top\" isLocked={ true }\r\n              text={ bun.name + '(верх)' }\r\n              thumbnail={ bun.image }\r\n              price={ bun.price }\r\n            />\r\n          </div>\r\n        ) }\r\n        <div className={ styles['burger-constructor-scroller'] } ref={drop}>\r\n          {\r\n            main.map((e, idx) => (\r\n                <BurgerConstructorItem item={e} index={idx} key={ `${e._id}_${ idx }` } />\r\n              )\r\n            )\r\n          }\r\n        </div>\r\n        { bun && (\r\n          <div className={ styles['burger-constructor-item'] } data-cy=\"constructor-bun-bottom\">\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={ true }\r\n              text={ bun.name + '(низ)' }\r\n              thumbnail={ bun.image } price={ bun.price }/>\r\n          </div>\r\n        ) }\r\n      </div>\r\n      <div\r\n        className={ classnames('mt-10', styles['burger-constructor-checkout']) }\r\n        data-cy=\"checkout-block\"\r\n      >\r\n        <span className=\"text text_type_digits-medium mr-10\">\r\n          { price }\r\n          <CurrencyIcon type={ 'primary' }/>\r\n        </span>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"medium\"\r\n          onClick={coDisable ? disabledOrderClick : onOrderClick}\r\n        >\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n      { showOrder && <OrderDetails onClose={onCloseOrder} orderNum={orderNum} /> }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import BurgerConstructor from './burger-constructor';\r\n\r\nexport default BurgerConstructor;\r\n","import React from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useUserSelector } from '../../services/selectors';\r\n\r\nfunction ProtectedUnauthorizedRoute({ children, ...rest}: RouteProps) {\r\n  const { name } = useUserSelector();\r\n  return (\r\n    <Route {...rest} render={() => (!name ? children : <Redirect to=\"/\" />)} />\r\n  )\r\n}\r\n\r\nexport default ProtectedUnauthorizedRoute;\r\n","import { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useUserSelector } from '../../services/selectors';\r\n\r\n\r\n\r\nfunction ProtectedRoute({ children, ...rest }: RouteProps) {\r\n  const { name } = useUserSelector();\r\n  const token = localStorage.getItem('token');\r\n  if (!name && !token) {\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={({ location }) => (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: {\r\n                from: location\r\n              }\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n    )\r\n  }\r\n  return (\r\n    <Route {...rest} render={() => children} />\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, { FC, useState } from 'react';\r\nimport { Button, Input, Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, Redirect, useHistory } from 'react-router-dom';\r\nimport styles from './forgot-password-page.module.css'\r\nimport { resetPasswordRequest } from '../../utils/auth';\r\n\r\ninterface OwnProps {}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst ForgotPasswordPage: FC<Props> = (props) => {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState('');\r\n  const onResetClick: React.FormEventHandler<HTMLFormElement> = (ev) => {\r\n    ev.preventDefault();\r\n    resetPasswordRequest(email)\r\n      .then(() => {\r\n        localStorage.setItem('resetPassword', 'true');\r\n        history.replace({\r\n          pathname: '/reset-password',\r\n          state: {\r\n            email\r\n          }\r\n        });\r\n      })\r\n  };\r\n  const withReset = localStorage.getItem('resetPassword')\r\n  if (withReset === 'true') {\r\n    return (\r\n      <Redirect to=\"/reset-password\" />\r\n    )\r\n  }\r\n  return (\r\n    <form className={styles.ForgotPasswordMain} onSubmit={onResetClick} >\r\n      <div className={styles.Logo}>\r\n        <Logo />\r\n      </div>\r\n      <div className=\"text text_type_main-default\">\r\n        <h2>Восстановление пароля</h2>\r\n      </div>\r\n      <div className={styles.EmailInput}>\r\n        <Input\r\n          name=\"email\"\r\n          value={email}\r\n          onChange={(ev) => setEmail(ev.target.value)}\r\n          placeholder=\"E-mail\"\r\n          type=\"email\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button>Восстановить</Button>\r\n      </div>\r\n      <div>\r\n        <span>Вспомнили пароль? <Link to=\"/login\">Войти</Link></span>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordPage;\r\n","import React, { useMemo } from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport styles from './ingredient-details.module.css';\r\n\r\ntype Props = {\r\n  items: Ingredient[]\r\n}\r\n\r\nfunction IngredientDetails({ items }: Props) {\r\n  const { params } = useRouteMatch<{ id: string }>();\r\n  const itemId = params.id;\r\n  const item = useMemo(() => {\r\n    return items.find((val) => val._id === itemId);\r\n  }, [items, itemId]);\r\n  if (!item) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={ `${ styles['content'] } text_type_main-default` }>\r\n      <img className={ 'ml-4 mr-4' } alt={ item.name } src={ item.image_large }/>\r\n      <span className={ 'text text_type_main-default mt-4 mb-8' }>{ item.name }</span>\r\n      <div className={ `${ styles['description'] } mb-15 text_color_inactive` }>\r\n        <div className={ `${ styles['description__item'] } mr-5` }>\r\n          <span>Калории, ккал</span>\r\n          <span className=\"text_type_digits-default\">{ item.calories }</span>\r\n        </div>\r\n        <div className={ `${ styles['description__item'] } mr-5` }>\r\n          <span>Белки, г</span>\r\n          <span className=\"text_type_digits-default\">{ item.proteins }</span>\r\n        </div>\r\n        <div className={ `${ styles['description__item'] } mr-5` }>\r\n          <span>Жиры, г</span>\r\n          <span className=\"text_type_digits-default\">{ item.fat }</span>\r\n        </div>\r\n        <div className={ styles['description__item'] }>\r\n          <span>Углеводы, г</span>\r\n          <span className=\"text_type_digits-default\">{ item.carbohydrates }</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default IngredientDetails;\r\n","import React from 'react';\r\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\r\nimport { useUserSelector } from '../../services/selectors';\r\n\r\nfunction ProtectedUnauthorizedRouteWithReset({ children, ...rest }: RouteProps) {\r\n  const { name } = useUserSelector();\r\n  const withReset = localStorage.getItem('resetPassword');\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() => (\r\n        !name && withReset === 'true' ? children : (<Redirect to=\"/\" />)\r\n      )}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ProtectedUnauthorizedRouteWithReset;\r\n","import React from 'react';\r\nimport { Ingredient } from '../../utils/ingredients';\r\nimport styles from './feed-list-ingredient.module.css'\r\nimport { useStoreSelector } from '../../services/selectors';\r\n\r\ntype Props = {\r\n  id: string;\r\n  overLength?: number;\r\n  zIndex?: number;\r\n}\r\n\r\nfunction FeedListIngredient({ id, overLength = 0, zIndex = 0 }: Props) {\r\n  const ingredient = useStoreSelector<Ingredient | undefined>((store) => {\r\n    return store.ingredients.ingredients.find((val) => val._id === id)\r\n  });\r\n  if (ingredient) {\r\n    return (\r\n      <div className={styles.Ingredient}>\r\n        <div className={styles.IngredientImage} style={{ zIndex }}>\r\n          <img src={ingredient.image} alt={ingredient.name} />\r\n          {\r\n            overLength > 0 && (\r\n              <span className={`text_type_digits-default ${styles.OverLength}`}>+{overLength}</span>\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default React.memo(FeedListIngredient);\r\n","import React from 'react';\r\nimport FeedListIngredient from './feed-list-ingredient';\r\nimport styles from './feed-list-ingredients.module.css';\r\n\r\ntype Props = {\r\n  ingredients: string[]\r\n};\r\n\r\nexport default function FeedListIngredients({ ingredients }: Props) {\r\n  const unique = new Set<string>();\r\n  ingredients.forEach((val) => unique.add(val));\r\n  const uniqueIngredients = Array.from(unique);\r\n  const length = uniqueIngredients.length;\r\n  const overLength = length - 6;\r\n  return (\r\n    <div className={styles.Ingredients}>\r\n      {\r\n        uniqueIngredients.map((val, idx) => {\r\n          if (idx === 5) {\r\n            return (\r\n              <FeedListIngredient\r\n                key={val}\r\n                id={val}\r\n                overLength={overLength}\r\n                zIndex={length - idx}\r\n              />\r\n            )\r\n          }\r\n          if (idx > 5) {\r\n            return null;\r\n          }\r\n          return (\r\n            <FeedListIngredient key={val} id={val} zIndex={length - idx} />\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React, { useMemo } from 'react';\r\nimport styles from './feed-list-item.module.css'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport FeedListIngredients from '../feed-list-ingredients';\r\nimport { useIngredientsSelector } from '../../services/selectors';\r\n\r\n\r\ntype Props = {\r\n  number: number;\r\n  name: string;\r\n  ingredients: string[];\r\n  createdAt: string;\r\n  onClick: () => void;\r\n}\r\n\r\nexport default function FeedListItem({ number, name, ingredients, createdAt, onClick }: Props) {\r\n  const ingredientInfos = useIngredientsSelector();\r\n  const idText = `${number}`.padStart(6, '0');\r\n  const date = useMemo(() => {\r\n    if (createdAt) {\r\n      return new Date(createdAt).toLocaleString();\r\n    }\r\n  }, [createdAt]);\r\n  const price = useMemo(() => {\r\n    if (ingredients) {\r\n      return ingredientInfos\r\n        .filter(val => ingredients.includes(val._id))\r\n        .reduce<number>((previousValue, currentValue) => previousValue + currentValue.price, 0);\r\n    }\r\n    return 0;\r\n  }, [ingredientInfos, ingredients])\r\n  return (\r\n    <div className={styles.FeedListItem} onClick={onClick}>\r\n      <div className={styles.FeedListItemId}>\r\n        <span>#{idText}</span>\r\n        <span className={\"text_color_inactive\"}>{date}</span>\r\n      </div>\r\n      <div className={\"text_type_main-medium\"}>\r\n        {name}\r\n      </div>\r\n      <div className={styles.FeedListItemIngredients}>\r\n        <FeedListIngredients ingredients={ingredients} />\r\n        <div className={styles.FeedListItemPrice}>\r\n          {price}\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport FeedListItem from '../feed-list-item';\r\nimport styles from './feed-list.module.css';\r\nimport classNames from 'classnames';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useFeedSelector } from '../../services/selectors';\r\n\r\ntype Props = {\r\n  className?: string;\r\n}\r\n\r\nexport default function FeedList({ className }: Props) {\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const feed = useFeedSelector();\r\n  const onShowDetails = useCallback((id: string) => {\r\n    history.push({\r\n      pathname: `/feed/${id}`,\r\n      state: {\r\n        order: true,\r\n        background: location\r\n      }\r\n    })\r\n  }, [history, location]);\r\n  return (\r\n    <div className={classNames(styles.FeedListScroller, className)}>\r\n      <div className={styles.FeedList}>\r\n        {\r\n          feed.map(val => {\r\n            return (\r\n              <FeedListItem\r\n                key={val._id}\r\n                name={val.name}\r\n                number={val.number}\r\n                createdAt={val.createdAt}\r\n                ingredients={val.ingredients}\r\n                onClick={() => onShowDetails(val._id)}\r\n              />\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport styles from './feed-statistic-orders.module.css';\r\n\r\ntype Props = {\r\n  title: string;\r\n  orders: number[];\r\n  completed?: boolean;\r\n}\r\n\r\nfunction FeedStatisticOrders({ title, orders, completed = false }: Props) {\r\n  return (\r\n    <div className={styles.Orders}>\r\n      <span className={'text text_type_main-medium'}>{title}</span>\r\n      <div className={classNames(styles.OrdersList, completed && styles.OrdersCompleted)}>\r\n        {\r\n          orders.map(val => (\r\n            <span key={val} className=\"text text_type_digits-default\" >\r\n              {`${val}`.padStart(6, '0')}\r\n            </span>\r\n          ))\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeedStatisticOrders;\r\n","import React from 'react';\r\nimport styles from './feed-statistics.module.css';\r\nimport FeedStatisticOrders from '../feed-statistic-orders';\r\nimport { useSelector } from 'react-redux';\r\nimport { StoreType } from '../../services/store';\r\n\r\nfunction FeedStatistics() {\r\n  const {\r\n    total, totalToday, feed\r\n  } = useSelector<StoreType, StoreType['feed']>(store => store.feed);\r\n  const inProgress = feed.filter(val => val.status === 'pending').map(val => val.number);\r\n  const completed = feed.filter(val => val.status === 'done')\r\n    .sort((a,b) => {\r\n      return new Date(b.createdAt).getTime() - new Date(a.updatedAt).getTime();\r\n    })\r\n    .map(val => val.number)\r\n    .slice(0, 5);\r\n  return (\r\n    <div className={`${styles.FeedStatistic} text`}>\r\n      <div className={styles.FeedStatisticOrders}>\r\n        <FeedStatisticOrders title=\"Готовы:\" orders={completed} completed/>\r\n        <FeedStatisticOrders title=\"В работе:\" orders={inProgress}/>\r\n      </div>\r\n      <div className={styles.FeedStatisticTotal}>\r\n        <span className=\"text_type_main-medium\">Выполнено за все время:</span>\r\n        <span className=\"text text_type_digits-large\">{total}</span>\r\n      </div>\r\n      <div className={styles.FeedStatisticTotal}>\r\n        <span className=\"text_type_main-medium\">Выполнено за сегодня:</span>\r\n        <span className=\"text text_type_digits-large\">{totalToday}</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeedStatistics;\r\n","import React, { useEffect } from 'react';\r\nimport FeedList from '../../components/feed-list';\r\nimport styles from './feed-list-page.module.css';\r\nimport FeedStatistics from '../../components/feed-statistics';\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/action-types';\r\nimport { useStoreDispatch } from '../../services/store';\r\n\r\nconst wsUrl = `${process.env.REACT_APP_WS_DOMAIN}/orders/all`\r\n\r\nfunction FeedListPage() {\r\n  const dispatch = useStoreDispatch();\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: WS_CONNECTION_START,\r\n      payload: {\r\n        wsUrl: wsUrl,\r\n        wsType: 'feed'\r\n      }\r\n    });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSE });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div className={`text text_type_main-default ${styles.FeedListPage}`}>\r\n      <h3>Лента заказов</h3>\r\n      <div className={styles.FeedListPageContent}>\r\n        <FeedList />\r\n        <FeedStatistics />\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FeedListPage;\r\n","import React, { useMemo } from 'react';\r\nimport styles from './feed-item-ingredients.module.css';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useIngredientsSelector } from '../../services/selectors';\r\n\r\ntype Props = {\r\n  ingredients: string[]\r\n}\r\n\r\ninterface IngredientInfo {\r\n  name: string;\r\n  image: string;\r\n  count: number;\r\n  id: string;\r\n  price: number;\r\n}\r\n\r\nfunction FeedItemIngredients({ ingredients }: Props) {\r\n  const mainIngredients = useIngredientsSelector()\r\n  const filteredIngredients = useMemo(() => {\r\n    return ingredients.reduce<Record<string, number>>((previousValue, currentValue) => {\r\n      if (previousValue[currentValue]) {\r\n        previousValue[currentValue] = previousValue[currentValue] + 1;\r\n      } else {\r\n        previousValue[currentValue] = 1;\r\n      }\r\n      return previousValue;\r\n    }, {})\r\n  }, [ingredients]);\r\n  const items = useMemo(() => {\r\n    const keys = Object.keys(filteredIngredients);\r\n    const result: IngredientInfo[] = [];\r\n    keys.forEach((key) => {\r\n      const ingredient = mainIngredients.find(val => val._id === key);\r\n      if (ingredient) {\r\n        result.push({\r\n          id: ingredient._id,\r\n          count: filteredIngredients[key],\r\n          image: ingredient.image,\r\n          name: ingredient.name,\r\n          price: ingredient.price\r\n        })\r\n      }\r\n    });\r\n    return result;\r\n  }, [mainIngredients, filteredIngredients])\r\n  return (<div className={styles.Ingredients}>\r\n    {\r\n      items.map((item) => (\r\n        <div key={item.id} className={styles.Ingredient}>\r\n          <div className={styles.IngredientImage}>\r\n            <img src={item.image} alt={item.name} />\r\n          </div>\r\n          <div className=\"text_type_main-default\">{item.name}</div>\r\n          <div className={ `text text_type_digits-default ${styles.IngredientPrice}` }>\r\n            {item.count} x {item.price}\r\n            <CurrencyIcon type={'primary'} />\r\n          </div>\r\n        </div>\r\n      ))\r\n    }\r\n  </div>)\r\n}\r\n\r\nexport default FeedItemIngredients;\r\n","import React, { useMemo } from 'react';\r\nimport styles from './feed-item-details.module.css';\r\nimport FeedItemIngredients from '../feed-item-ingredients';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useIngredientsSelector } from '../../services/selectors';\r\n\r\ntype Props = {\r\n  name: string;\r\n  ingredients: string[];\r\n  createdAt: string;\r\n  status: string;\r\n}\r\n\r\nfunction useIngredientsTotalPrice(ingredients: string[] = []) {\r\n  const mainIngredients = useIngredientsSelector();\r\n  return useMemo(() => {\r\n    const prices = mainIngredients.reduce<Record<string, number>>((previousValue, currentValue) => {\r\n      previousValue[currentValue._id] = currentValue.price;\r\n      return previousValue;\r\n    }, {});\r\n    return ingredients.map(val => prices[val] || 0).reduce((prev, curr) => prev + curr, 0);\r\n  }, [ingredients, mainIngredients]);\r\n}\r\n\r\nexport default function FeedItemDetails({ name, ingredients, createdAt, status }: Props) {\r\n  const totalPrice = useIngredientsTotalPrice(ingredients);\r\n  const statusText = status === 'done' ? 'Выполнен' : 'В работе';\r\n  const statusClass = 'mb-4 ' + (status === 'done' ? styles.Completed : '')\r\n  return (\r\n    <div className={ `${ styles.FeedItemDetails } text text_type_main-default` }>\r\n      <span className=\"mb-4 text_type_main-medium\">{ name }</span>\r\n      <span className={ statusClass }>{ statusText }</span>\r\n      <div className={ `${ styles.Scroller } mb-4` }>\r\n        <FeedItemIngredients ingredients={ ingredients }/>\r\n      </div>\r\n      <div className={ styles.FeedItemDetailsFooter }>\r\n        <span className=\"text_color_inactive\">{ new Date(createdAt).toLocaleString() }</span>\r\n        <span className=\"text_type_digits-default\">\r\n            { totalPrice }\r\n          <CurrencyIcon type=\"primary\"/>\r\n          </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport styles from './feed-page.module.css';\r\nimport FeedItemDetails from '../../components/feed-item-details';\r\nimport { useFeedSelector } from '../../services/selectors';\r\n\r\ntype TParams = {\r\n  feedId: string;\r\n}\r\n\r\nfunction FeedPage() {\r\n  const { params } = useRouteMatch<TParams>();\r\n  const { feedId } = params;\r\n  const feed = useFeedSelector();\r\n  const item = feed.find(val => val._id === feedId);\r\n  if (item) {\r\n    const feedNum = `${ item.number }`.padStart(6, '0');\r\n    const { name, status, ingredients, createdAt } = item;\r\n    return (\r\n      <div className={ styles.FeedPage }>\r\n        <div>#{ feedNum }</div>\r\n        <FeedItemDetails\r\n          name={ name }\r\n          status={ status }\r\n          createdAt={ createdAt }\r\n          ingredients={ ingredients }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default FeedPage;\r\n","import React, { FunctionComponent, useState } from 'react';\r\nimport { Button, Input, Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './login-page.module.css';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { useStoreDispatch } from '../../services/store';\r\nimport { loginAction } from '../../services/auth';\r\nimport { useUserSelector } from '../../services/selectors';\r\n\r\ninterface OwnProps {}\r\n\r\ntype Props = OwnProps;\r\n\r\ntype LocationState = {\r\n  from: {\r\n    pathname: string\r\n  }\r\n}\r\n\r\nconst LoginPage: FunctionComponent<Props> = () => {\r\n  const location = useLocation<LocationState>();\r\n  const dispatch = useStoreDispatch()\r\n  const { name } = useUserSelector();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPass, setShowPass] = useState(false);\r\n  const onHandleSubmit: React.FormEventHandler<HTMLFormElement> = (ev) => {\r\n    ev.preventDefault();\r\n    dispatch(loginAction({\r\n      email,\r\n      password\r\n    }))\r\n  }\r\n  if (name) {\r\n    localStorage.removeItem('resetPassword');\r\n    const { from } = location.state || { from: { pathname: \"/\" } };\r\n    return (\r\n      <Redirect to={from} />\r\n    )\r\n  }\r\n  return (\r\n    <form className={styles.LoginContainer} onSubmit={onHandleSubmit}>\r\n      <div>\r\n        <Logo />\r\n      </div>\r\n      <h2 className={styles.H2}>Вход</h2>\r\n      <div>\r\n        <Input\r\n          name=\"email\"\r\n          value={email}\r\n          onChange={(ev) => setEmail(ev.target.value)}\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Input\r\n          name=\"password\"\r\n          value={password}\r\n          onChange={(ev) => setPassword(ev.target.value)}\r\n          type={showPass ? 'text' : 'password'}\r\n          placeholder=\"Пароль\"\r\n          icon={showPass ? 'HideIcon' : 'ShowIcon'}\r\n          onIconClick={() => setShowPass(prev => !prev)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button size=\"medium\" type=\"primary\">Войти</Button>\r\n      </div>\r\n      <div>\r\n        <span>\r\n          {'Вы - новый пользователь? '}\r\n          <Link to=\"/register\">Зарегистрироваться</Link>\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <span>\r\n          {'Забыли пароль? '}\r\n          <Link to=\"/forgot-password\">Восстановить пароль</Link>\r\n        </span>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport styles from '../feed-page/feed-page.module.css';\r\nimport FeedItemDetails from '../../components/feed-item-details';\r\nimport { useOrdersSelector } from '../../services/selectors';\r\n\r\ntype TParams = {\r\n  orderId: string;\r\n}\r\n\r\nfunction OrderPage() {\r\n  const { params } = useRouteMatch<TParams>();\r\n  const { orderId } = params;\r\n  const orders = useOrdersSelector();\r\n  const item = orders.find(val => val._id === orderId);\r\n  if (item) {\r\n    const feedNum = `${item.number}`.padStart(6, '0');\r\n    const { name, status, ingredients, createdAt } = item;\r\n    return (\r\n      <div className={styles.FeedPage}>\r\n        <div>#{feedNum}</div>\r\n        <FeedItemDetails\r\n          name={name}\r\n          status={status}\r\n          createdAt={createdAt}\r\n          ingredients={ingredients}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default OrderPage;\r\n","import React, { useCallback } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport { logoutAction } from '../../services/auth';\r\nimport { useStoreDispatch } from '../../services/store';\r\nimport styles from './profile.module.css';\r\n\r\ninterface OwnProps {\r\n  mainBlockClassName?: string\r\n}\r\n\r\ntype Props = OwnProps;\r\n\r\nfunction Profile({ children, mainBlockClassName }: React.PropsWithChildren<Props>) {\r\n  const history = useHistory();\r\n  const dispatch = useStoreDispatch();\r\n  const onLogoutClick = useCallback(() => {\r\n    dispatch(logoutAction()).then(() => {\r\n      history.replace({\r\n        pathname: \"/login\"\r\n      });\r\n    });\r\n  }, [dispatch, history]);\r\n  return (\r\n    <div className={styles.ProfilePage}>\r\n      <div className={styles.ProfilePage_Menu}>\r\n        <NavLink\r\n          exact\r\n          to=\"/profile\"\r\n          className={`text ${styles.ProfilePage_MenuItem}`}\r\n          activeClassName={styles.ProfilePage_MenuItem_Active}\r\n        >\r\n          Профиль\r\n        </NavLink>\r\n        <NavLink\r\n          exact\r\n          to=\"/profile/orders\"\r\n          className={styles.ProfilePage_MenuItem}\r\n          activeClassName={styles.ProfilePage_MenuItem_Active}\r\n        >\r\n          История заказов\r\n        </NavLink>\r\n        <span className={styles.ProfilePage_MenuItem} onClick={onLogoutClick}>Выход</span>\r\n      </div>\r\n      <div className={`${styles.ProfilePage_Main} ${mainBlockClassName || ''}`}>\r\n        { children }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useEffect } from 'react';\r\nimport Profile from '../../components/profile';\r\nimport FeedListItem from '../../components/feed-list-item';\r\nimport { useStoreDispatch } from '../../services/store';\r\nimport styles from './orders-page.module.css';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { getCookie } from '../../utils/cookies';\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/action-types';\r\nimport { useOrdersSelector } from '../../services/selectors';\r\nimport { loadOrders } from '../../services/orders';\r\n\r\nconst wsUrl = `${process.env.REACT_APP_WS_DOMAIN}/orders`\r\n\r\nfunction OrdersPage() {\r\n  const dispatch = useStoreDispatch();\r\n  useEffect(() => {\r\n    dispatch(loadOrders());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const orders = useOrdersSelector();\r\n  const token = getCookie('token');\r\n  useEffect(() => {\r\n    if (token) {\r\n      const parsedToken = token.slice(7)\r\n      dispatch({ type: WS_CONNECTION_START, payload: {\r\n          wsUrl: `${wsUrl}?token=${parsedToken}`,\r\n          wsType: 'orders'\r\n        }\r\n      });\r\n      return () => {\r\n        dispatch({\r\n          type: WS_CONNECTION_CLOSE\r\n        })\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [token]);\r\n  const onShowDetails = (id: string) => {\r\n    history.push({\r\n      pathname: `/profile/orders/${id}`,\r\n      state: {\r\n        order: true,\r\n        background: location\r\n      }\r\n    })\r\n  };\r\n  return (\r\n    <Profile>\r\n      <div className={styles.Scroller}>\r\n        <div className={styles.OrderList}>\r\n          {\r\n            orders.map(val => {\r\n              return (\r\n                <FeedListItem\r\n                  key={val._id}\r\n                  number={val.number}\r\n                  name={val.name}\r\n                  createdAt={val.createdAt}\r\n                  ingredients={val.ingredients}\r\n                  onClick={() => onShowDetails(val._id)}\r\n                />\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    </Profile>\r\n  )\r\n}\r\n\r\nexport default OrdersPage;\r\n","import React, { FunctionComponent, useCallback, useEffect, useState } from 'react';\r\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { StoreType, useStoreDispatch } from '../../services/store';\r\nimport { getUserAction, updateUserAction } from '../../services/auth';\r\nimport Profile from '../../components/profile';\r\nimport styles from './profile-page.module.css'\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useStoreSelector } from '../../services/selectors';\r\n\r\ninterface OwnProps {}\r\n\r\ntype Props = OwnProps;\r\n\r\ntype IconType = 'EditIcon' | 'CloseIcon';\r\n\r\nconst ProfilePage: FunctionComponent<Props> = (props) => {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const dispatch = useStoreDispatch();\r\n  useEffect(() => {\r\n    dispatch(getUserAction());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n  const {\r\n    user: {\r\n      name: userName,\r\n      email: userEmail\r\n    },\r\n    error\r\n  } = useStoreSelector<StoreType['auth']>(store => store.auth);\r\n  if (error) {\r\n    history.replace({\r\n      pathname: `/login`,\r\n      state: {\r\n        order: true,\r\n        background: location\r\n      }\r\n    });\r\n  }\r\n  const [name, setName] = useState<string>('');\r\n  const [email, setEmail] = useState<string>('');\r\n  const [password, setPassword] = useState('');\r\n  const [nameIcon] = useState<IconType>('EditIcon');\r\n  const [emailIcon] = useState<IconType>('EditIcon');\r\n  const [passIcon] = useState<IconType>('EditIcon');\r\n  useEffect(() => setName(userName), [userName])\r\n  useEffect(() => setEmail(userEmail), [userEmail])\r\n  const onClear = useCallback((type: 'name' | 'password' | 'email', canClose: boolean) => {\r\n    if (canClose) {\r\n      switch (type) {\r\n        case 'password':\r\n          break;\r\n        case 'name':\r\n          setName(userName);\r\n          break;\r\n        case 'email':\r\n          setEmail(userEmail);\r\n          break;\r\n      }\r\n    }\r\n  }, [userEmail, userName]);\r\n  const onCancel = () => {\r\n    setName(userName);\r\n    setEmail(userEmail);\r\n    setPassword('')\r\n  }\r\n  const onSave = () => {\r\n    dispatch(updateUserAction({\r\n      name: name,\r\n      email: email\r\n    }))\r\n  }\r\n  const onHandleSubmit: React.FormEventHandler<HTMLFormElement> = (ev) => {\r\n    ev.preventDefault();\r\n    onSave();\r\n  }\r\n  return (\r\n    <Profile mainBlockClassName={styles.Main}>\r\n      <form className={styles.MainForm} onSubmit={onHandleSubmit}>\r\n        <div>\r\n          <Input\r\n            value={name}\r\n            onChange={(ev) => setName(ev.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Имя\"\r\n            icon={nameIcon}\r\n            // onFocus={() => onFocus('name')}\r\n            // onBlur={() => onBlur('name')}\r\n            onIconClick={() => onClear('name', nameIcon === 'CloseIcon')}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            value={email}\r\n            onChange={(ev) => setEmail(ev.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"E-mail\"\r\n            icon={emailIcon}\r\n            // onFocus={() => onFocus('email')}\r\n            // onBlur={() => onBlur('email')}\r\n            onIconClick={() => onClear('email', nameIcon === 'CloseIcon')}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            value={password}\r\n            onChange={(ev) => setPassword(ev.target.value)}\r\n            type=\"text\"\r\n            placeholder=\"Пароль\"\r\n            icon={passIcon}\r\n            // onFocus={() => onFocus('password')}\r\n            // onBlur={() => onBlur('password')}\r\n            onIconClick={() => onClear('password', nameIcon === 'CloseIcon')}\r\n          />\r\n        </div>\r\n      </form>\r\n      <div className={styles.Buttons}>\r\n        <Button type=\"secondary\" onClick={onCancel}>Отмена</Button>\r\n        <Button type=\"primary\" onClick={onSave}>Сохранить</Button>\r\n      </div>\r\n    </Profile>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n","import React, { FunctionComponent, useState } from 'react';\r\nimport { Button, Input, Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './register-page.module.css';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { registerAction } from '../../services/auth';\r\nimport { useStoreDispatch } from '../../services/store';\r\n\r\ninterface OwnProps {}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst RegisterPage: FunctionComponent<Props> = (props) => {\r\n  const history = useHistory();\r\n  const dispatch = useStoreDispatch();\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPass, setShowPass] = useState(false);\r\n  const onHandleSubmit: React.FormEventHandler<HTMLFormElement> = (ev) => {\r\n    ev.preventDefault();\r\n    dispatch(registerAction({\r\n      name,\r\n      email,\r\n      password\r\n    }))\r\n      .then(() => {\r\n        history.replace(\"/\");\r\n      })\r\n  }\r\n  return (\r\n    <form className={styles.RegisterContainer} onSubmit={onHandleSubmit}>\r\n      <div>\r\n        <Logo />\r\n      </div>\r\n      <h2 className={styles.H2}>Регистрация</h2>\r\n      <div>\r\n        <Input\r\n          name=\"name\"\r\n          value={name}\r\n          onChange={(ev) => setName(ev.target.value)}\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Input\r\n          name=\"email\"\r\n          value={email}\r\n          onChange={(ev) => setEmail(ev.target.value)}\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Input\r\n          name=\"password\"\r\n          value={password}\r\n          onChange={(ev) => setPassword(ev.target.value)}\r\n          type={showPass ? 'text' : 'password'}\r\n          placeholder=\"Пароль\"\r\n          icon={showPass ? 'HideIcon' : 'ShowIcon'}\r\n          onIconClick={() => setShowPass(prev => !prev)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button type=\"primary\">Зарегистрироваться</Button>\r\n      </div>\r\n      <div>\r\n        <span>\r\n          {'Уже зарегистрированы '}\r\n          <Link to=\"/login\">Войти</Link>\r\n        </span>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import React, { FunctionComponent, useCallback, useState } from 'react';\r\nimport { Button, Input, Logo } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport styles from './reset-password-page.module.css';\r\nimport { resetPassword } from '../../utils/auth';\r\n\r\ninterface OwnProps {}\r\n\r\ntype Props = OwnProps;\r\n\r\nconst ResetPasswordPage: FunctionComponent<Props> = (props) => {\r\n  const history = useHistory();\r\n  const [token, setToken] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPass, setShowPass] = useState(false);\r\n  const onHandleSubmit: React.FormEventHandler = useCallback((ev) => {\r\n    ev.preventDefault();\r\n    resetPassword(token, password)\r\n      .then(() => {\r\n        localStorage.removeItem('resetPassword')\r\n        history.replace({\r\n          pathname: \"/login\"\r\n        })\r\n      })\r\n  }, [token, password, history]);\r\n  return (\r\n    <form className={styles.Main} onSubmit={onHandleSubmit}>\r\n      <div>\r\n        <Logo />\r\n      </div>\r\n      <div>\r\n        <span className=\"text text_type_main-medium\">Восстановление пароля</span>\r\n      </div>\r\n      <div>\r\n        <Input\r\n          value={password}\r\n          onChange={(ev) => setPassword(ev.target.value)}\r\n          type={showPass ? 'text' : 'password'}\r\n          placeholder=\"Введите новый пароль\"\r\n          icon={showPass ? 'HideIcon' : 'ShowIcon'}\r\n          onIconClick={() => setShowPass(prev => !prev)}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Input\r\n          value={token}\r\n          onChange={(ev) => setToken(ev.target.value)}\r\n          placeholder=\"Введите код из письма\"\r\n          type=\"text\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <Button type=\"primary\">Восстановить</Button>\r\n      </div>\r\n      <div>\r\n        <span>Вспомнили пароль? <Link to=\"/login\">Войти</Link></span>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordPage;\r\n","import React from 'react';\r\nimport Modal from '../modal/modal';\r\nimport FeedItemDetails from '../feed-item-details';\r\nimport { useSelector } from 'react-redux';\r\nimport { StoreType } from '../../services/store';\r\nimport { FeedItem } from '../../utils/orders';\r\nimport { useRouteMatch } from 'react-router-dom';\r\n\r\ntype Props = {\r\n  onClose: () => void;\r\n}\r\n\r\nfunction FeedItemModal({ onClose }: Props) {\r\n  const { params } = useRouteMatch<{ id: string }>();\r\n  const orderId = params.id;\r\n  const feedItem = useSelector<StoreType, FeedItem | undefined>(\r\n    store => store.feed.feed.find(val => val._id === orderId)\r\n  );\r\n  if (feedItem) {\r\n    const number = `${feedItem.number}`.padStart(6, '0');\r\n    return (\r\n      <Modal onClose={ onClose } title={`#${number}`}>\r\n        <FeedItemDetails\r\n          name={feedItem.name}\r\n          ingredients={feedItem.ingredients}\r\n          createdAt={feedItem.createdAt}\r\n          status={feedItem.status}\r\n        />\r\n      </Modal>\r\n    )\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default FeedItemModal;\r\n","import React from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { FeedItem } from '../../utils/orders';\r\nimport Modal from '../modal/modal';\r\nimport FeedItemDetails from '../feed-item-details';\r\nimport { useStoreSelector } from '../../services/selectors';\r\n\r\ntype Props = {\r\n  onClose: () => void;\r\n}\r\n\r\nfunction OrderModal({ onClose }: Props) {\r\n  const { params } = useRouteMatch<{ id: string }>();\r\n  const orderId = params.id;\r\n  const orderItem = useStoreSelector<FeedItem | undefined>(\r\n    store => store.orders.orders.find(val => val._id === orderId)\r\n  );\r\n  if (orderItem) {\r\n    const number = `${orderItem.number}`.padStart(6, '0');\r\n    return (\r\n      <Modal onClose={ onClose } title={`#${number}`}>\r\n        <FeedItemDetails\r\n          name={orderItem.name}\r\n          ingredients={orderItem.ingredients}\r\n          createdAt={orderItem.createdAt}\r\n          status={orderItem.status}\r\n        />\r\n      </Modal>\r\n    )\r\n  }\r\n  return null\r\n}\r\n\r\nexport default OrderModal;\r\n","import React, { useEffect } from 'react';\r\nimport './app.module.css';\r\nimport AppHeader from '../app-header';\r\nimport MainContainer from '../main-container';\r\nimport BurgerIngredients from '../burger-ingredients';\r\nimport BurgerConstructor from '../burger-contructor';\r\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\r\nimport { loadIngredients, useStoreDispatch } from '../../services/store';\r\nimport { getUserAction } from '../../services/auth';\r\nimport ProtectedUnauthorizedRoute from '../protected-unauthorized-route';\r\nimport ProtectedRoute from '../protected-route';\r\nimport ForgotPasswordPage from '../../pages/forgot-password-page';\r\nimport Modal from '../modal/modal';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\nimport ProtectedUnauthorizedRouteWithReset from '../protected-unauthorized-route-with-reset';\r\nimport {\r\n  LoginPage, RegisterPage, ResetPasswordPage, ProfilePage,\r\n  OrdersPage, OrderPage, FeedListPage, FeedPage\r\n} from '../../pages'\r\nimport { loadFeed } from '../../services/feed';\r\nimport FeedItemModal from '../feed-item-modal';\r\nimport OrderModal from '../order-modal';\r\nimport { loadOrders } from '../../services/orders';\r\nimport { useIngredientsSelector } from '../../services/selectors';\r\n\r\ntype LocationBasic = ReturnType<typeof useLocation>\r\n\r\ntype LocationState = {\r\n  background: LocationBasic\r\n}\r\n\r\nfunction App() {\r\n  const dispatch = useStoreDispatch();\r\n  const location = useLocation<LocationState>();\r\n  const history = useHistory();\r\n  const background = history.action === 'PUSH' && location.state && location.state.background;\r\n  const ingredients = useIngredientsSelector();\r\n  useEffect(() => {\r\n    dispatch(getUserAction());\r\n    dispatch(loadIngredients());\r\n    dispatch(loadFeed());\r\n    dispatch(loadOrders());\r\n  }, [dispatch]);\r\n  const onModalClose = () => {\r\n    history.replace(background);\r\n  }\r\n  return (\r\n    <div className=\"App text text_type_main-default\">\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route exact path=\"/\">\r\n          <MainContainer style={{ gap: '40px' }}>\r\n            <BurgerIngredients />\r\n            <BurgerConstructor />\r\n          </MainContainer>\r\n        </Route>\r\n        <Route exact path=\"/ingredient/:id\">\r\n          <IngredientDetails items={ingredients} />\r\n        </Route>\r\n        <Route exact path=\"/feed\">\r\n          <FeedListPage />\r\n        </Route>\r\n        <Route exact path=\"/feed/:feedId\">\r\n          <FeedPage />\r\n        </Route>\r\n        <ProtectedUnauthorizedRoute exact path=\"/login\">\r\n          <LoginPage />\r\n        </ProtectedUnauthorizedRoute>\r\n        <ProtectedUnauthorizedRoute exact path=\"/register\">\r\n          <RegisterPage />\r\n        </ProtectedUnauthorizedRoute>\r\n        <ProtectedUnauthorizedRoute exact path=\"/forgot-password\">\r\n          <ForgotPasswordPage />\r\n        </ProtectedUnauthorizedRoute>\r\n        <ProtectedUnauthorizedRouteWithReset exact path=\"/reset-password\">\r\n          <ResetPasswordPage />\r\n        </ProtectedUnauthorizedRouteWithReset>\r\n        <ProtectedRoute exact path=\"/profile\">\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute exact path=\"/profile/orders\">\r\n          <OrdersPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute exact path=\"/profile/orders/:orderId\">\r\n          <OrderPage />\r\n        </ProtectedRoute>\r\n      </Switch>\r\n      { background && (\r\n        <>\r\n          <Route\r\n            exact\r\n            path=\"/ingredient/:id\"\r\n            render={() => <Modal onClose={onModalClose} title=\"Детали ингредиента\" >\r\n              <IngredientDetails items={ingredients} />\r\n            </Modal>}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/feed/:id\"\r\n            render={() => <FeedItemModal onClose={onModalClose} />}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/profile/orders/:id\"\r\n            render={() => <OrderModal onClose={onModalClose} />}\r\n          />\r\n        </>)\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport store from './services/store'\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport moment from 'moment/moment';\r\nimport 'moment/locale/ru';\r\n\r\nmoment.locale('ru');\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n          <App />\r\n        </BrowserRouter>\r\n      </DndProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProfilePage\":\"profile_ProfilePage__XyJqF\",\"ProfilePage_Menu\":\"profile_ProfilePage_Menu__3LYAs\",\"ProfilePage_MenuItem\":\"profile_ProfilePage_MenuItem__1Sqbz\",\"ProfilePage_MenuItem_Active\":\"profile_ProfilePage_MenuItem_Active__1_nGs\",\"ProfilePage_Main\":\"profile_ProfilePage_Main__2IBKq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__2KMar\",\"description__item\":\"ingredient-details_description__item__1-Ych\",\"description\":\"ingredient-details_description__1eTeM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-ingredients\":\"burger-ingredients_burger-ingredients__1CEhi\",\"burger-ingredients-container\":\"burger-ingredients_burger-ingredients-container__6gk-H\",\"burger-ingredients-scroller\":\"burger-ingredients_burger-ingredients-scroller__1adOr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app-header\":\"app-header_app-header__sdeY1\",\"app-header-nav\":\"app-header_app-header-nav__2Sd1p\",\"app-header-logo\":\"app-header_app-header-logo__UaQS9\",\"app-header-profile-wrapper\":\"app-header_app-header-profile-wrapper__3mLJ6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-constructor-scroller\":\"burger-constructor_burger-constructor-scroller__26ddT\",\"burger-constructor-item\":\"burger-constructor_burger-constructor-item__14B3C\",\"burger-constructor-item__draggable\":\"burger-constructor_burger-constructor-item__draggable__3Al43\",\"burger-constructor-checkout\":\"burger-constructor_burger-constructor-checkout__1rHyq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__fHqvl\",\"modal__header\":\"modal_modal__header__3a7y8\",\"modal__close-button\":\"modal_modal__close-button__3SN-S\",\"modal__body\":\"modal_modal__body__2oHWB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedListItem\":\"feed-list-item_FeedListItem__18zOW\",\"FeedListItemId\":\"feed-list-item_FeedListItemId__38IvZ\",\"FeedListItemIngredients\":\"feed-list-item_FeedListItemIngredients__VhIXv\",\"FeedListItemPrice\":\"feed-list-item_FeedListItemPrice__2v-fI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedStatistic\":\"feed-statistics_FeedStatistic__27L3v\",\"FeedStatisticOrders\":\"feed-statistics_FeedStatisticOrders__2o4lV\",\"FeedStatisticTotal\":\"feed-statistics_FeedStatisticTotal__N14cO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedItemDetails\":\"feed-item-details_FeedItemDetails__ODfw5\",\"Scroller\":\"feed-item-details_Scroller__3OlYk\",\"Completed\":\"feed-item-details_Completed__tZgqA\",\"FeedItemDetailsFooter\":\"feed-item-details_FeedItemDetailsFooter__3ci4L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Ingredients\":\"feed-item-ingredients_Ingredients__1JUoN\",\"Ingredient\":\"feed-item-ingredients_Ingredient__18UgA\",\"IngredientImage\":\"feed-item-ingredients_IngredientImage__11YMU\",\"IngredientPrice\":\"feed-item-ingredients_IngredientPrice__2QxD8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedPage\":\"feed-page_FeedPage__76Ev3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ForgotPasswordMain\":\"forgot-password-page_ForgotPasswordMain__1WjVq\",\"Logo\":\"forgot-password-page_Logo__3tpAH\",\"EmailInput\":\"forgot-password-page_EmailInput__FB_Q0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Ingredient\":\"feed-list-ingredient_Ingredient__3Xf21\",\"IngredientImage\":\"feed-list-ingredient_IngredientImage__2OgF_\",\"OverLength\":\"feed-list-ingredient_OverLength__dgVIe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Orders\":\"feed-statistic-orders_Orders__AVOYS\",\"OrdersTitle\":\"feed-statistic-orders_OrdersTitle__1P_u2\",\"OrdersList\":\"feed-statistic-orders_OrdersList__3K28H\",\"OrdersCompleted\":\"feed-statistic-orders_OrdersCompleted__dpkaA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"profile-page_Main__2qD-h\",\"MainForm\":\"profile-page_MainForm__3FVVp\",\"Buttons\":\"profile-page_Buttons__2xHJN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonText\":\"header-button_ButtonText__3QXoI\",\"ActiveLink\":\"header-button_ActiveLink__5ktdN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-ingredient\":\"burger-ingredient_burger-ingredient__NnQrk\",\"burger-ingredient-price-text\":\"burger-ingredient_burger-ingredient-price-text__yEpp_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__TyWGQ\",\"order-number\":\"order-details_order-number__1_xqu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger-constructor-item\":\"burger-constructor-item_burger-constructor-item__2l9Ji\",\"burger-constructor-item__draggable\":\"burger-constructor-item_burger-constructor-item__draggable__1MX0k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedList\":\"feed-list_FeedList__YKjwD\",\"FeedListScroller\":\"feed-list_FeedListScroller__3qkVa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedListPage\":\"feed-list-page_FeedListPage__3A7yy\",\"FeedListPageContent\":\"feed-list-page_FeedListPageContent__-00Ek\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoginContainer\":\"login-page_LoginContainer__2TmTg\",\"H2\":\"login-page_H2__2w1Ab\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Scroller\":\"orders-page_Scroller__eARca\",\"OrderList\":\"orders-page_OrderList__C2aR0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"RegisterContainer\":\"register-page_RegisterContainer__3bUcc\",\"H2\":\"register-page_H2__ReEB7\"};"],"sourceRoot":""}